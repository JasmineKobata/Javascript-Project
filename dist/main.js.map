{"version":3,"file":"main.js","mappings":"qCAgBA,MAhBA,MACIA,YAAYC,EAAMC,GACdC,KAAKF,KAAOA,EACZE,KAAKD,IAAMA,EACXC,KAAKC,MAAQ,IAAIC,KACrB,CAEAC,aACI,OAAOC,OAAOC,eAAeL,KAAKH,aAAaS,IACnD,CAEAC,OACI,OAAOP,KAAKH,YAAYS,IAC5B,GCJJ,EAPA,cAAsBE,EAClBX,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,GACZC,KAAKC,MAAMS,IAAM,2BACrB,GCEJ,EANA,cAAmBF,EACfX,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,EAChB,GCKJ,EAPA,cAAuBS,EACnBX,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,GACZC,KAAKF,OAASa,EAAAA,YAAoBX,KAAKC,MAAMS,IAAM,+BAAiCV,KAAKC,MAAMS,IAAM,6BACzG,G,saCHJ,MAAMC,EAMFd,cACI,IAAIe,EAAO,CAACC,EAAGF,EAAMG,YAAY,EAAGC,EAAGC,KAAKC,MAAMN,EAAMO,WAAW,IAC/DC,EAAO,CAACN,EAAG,EAAGE,EAAGC,KAAKC,MAAMN,EAAMO,WAAW,IACjDlB,KAAKoB,SAAW,CACZC,OAAQ,IAAIC,EAASX,EAAMY,YAAaX,GACxCY,MAAO,IAAIF,EAASX,EAAMc,WAAYN,IAE1CP,EAAO,CAACC,EAAG,EAAGE,EAAGC,KAAKC,MAAMN,EAAMO,WAAW,IAC7CC,EAAO,CAACN,EAAGF,EAAMG,YAAY,EAAGC,EAAGC,KAAKC,MAAMN,EAAMO,WAAW,IAC/DlB,KAAK0B,KAAO,CACRL,OAAQ,IAAIM,EAAKhB,EAAMY,YAAaJ,GACpCK,MAAO,IAAIG,EAAKhB,EAAMc,WAAYb,IACtCZ,KAAK4B,SAAW,CACZP,OAAQ,GACRG,MAAO,IAEXxB,KAAK6B,KAAOlB,EAAMmB,SAAS9B,KAAKoB,SAAUpB,KAAK0B,KAAM1B,KAAK4B,SAC9D,CAEAG,gBAAgBX,EAAUM,EAAME,GAC5B,IAAIC,EAAO,GAEX,IAAK,IAAIG,EAAE,EAAGA,EAAIrB,EAAMG,YAAakB,IAAK,CACtCH,EAAKI,KAAK,IACV,IAAK,IAAIC,EAAE,EAAGA,EAAIvB,EAAMO,WAAYgB,IAChCL,EAAKG,GAAGC,KAAK,GAErB,CAEA,IAAIlC,EAAM,CAACc,EAAG,EAAGE,EAAG,GAChBoB,EAAU,IAAIC,EAAQzB,EAAMc,WAAY1B,GAyB5C,OAxBA8B,EAAKQ,IAAItC,GAAKkC,KAAKE,GACnBP,EAASJ,MAAMS,KAAKE,GAEpBpC,EAAM,CAACc,EAAG,EAAGE,EAAGJ,EAAMO,WAAW,GACjCiB,EAAU,IAAIC,EAAQzB,EAAMc,WAAY1B,GACxC8B,EAAKQ,IAAItC,GAAKkC,KAAKE,GACnBP,EAASJ,MAAMS,KAAKE,GAEpBpC,EAAM,CAACc,EAAGF,EAAMG,YAAY,EAAGC,EAAG,GAClCoB,EAAU,IAAIC,EAAQzB,EAAMY,YAAaxB,GACzC8B,EAAKQ,IAAItC,GAAKkC,KAAKE,GACnBP,EAASP,OAAOY,KAAKE,GAErBpC,EAAM,CAACc,EAAGF,EAAMG,YAAY,EAAGC,EAAGJ,EAAMO,WAAW,GACnDiB,EAAU,IAAIC,EAAQzB,EAAMY,YAAaxB,GACzC8B,EAAKQ,IAAItC,GAAKkC,KAAKE,GACnBP,EAASP,OAAOY,KAAKE,GAErBN,EAAKQ,IAAIX,EAAKF,MAAMzB,KAAKkC,KAAKP,EAAKF,OACnCK,EAAKQ,IAAIX,EAAKL,OAAOtB,KAAKkC,KAAKP,EAAKL,QAEpCQ,EAAKQ,IAAIjB,EAASI,MAAMzB,KAAKkC,KAAKb,EAASI,OAC3CK,EAAKQ,IAAIjB,EAASC,OAAOtB,KAAKkC,KAAKb,EAASC,QAErCQ,CACX,CAEAS,QACI,OAAOtC,KAAKoB,SAASC,OAAOtB,IAAIwC,OAAOvC,KAAK0B,KAAKF,MAAMzB,MACnDC,KAAKoB,SAASI,MAAMzB,IAAIwC,OAAOvC,KAAK0B,KAAKL,OAAOtB,IACxD,EACH,EApEKY,EAAK,aACa,GAAC,EADnBA,EAAK,cAEc,GAAC,EAFpBA,EAAK,cAGc,GAAC,EAHpBA,EAAK,aAIa,GAkExB,QCxEO,SAAS6B,EAAUzC,GACtB,OAAOA,EAAIgB,GAAK,GAAKhB,EAAIgB,EAAIJ,EAAAA,YAAoBZ,EAAIc,GAAK,GAAKd,EAAIc,EAAIF,EAAAA,WAC3E,CA4BA8B,MAAMC,UAAUL,IAAM,SAAStC,GAC3B,OAAOC,KAAKD,EAAIc,GAAGd,EAAIgB,EAC3B,EAEA0B,MAAMC,UAAUC,aAAe,SAASpC,GACpCqC,OAAOC,MACX,EAEAJ,MAAMC,UAAUI,KAAO,WACnB,OAAO9C,KAAKA,KAAK+C,OAAS,EAC9B,EAEAN,MAAMC,UAAUM,MAAQ,WACpB,OAAOhD,KAAK,EAChB,EAEAI,OAAOsC,UAAUH,OAAS,SAASxC,GAC/B,OAAOC,KAAKe,IAAMhB,EAAIgB,GAAKf,KAAKa,IAAMd,EAAIc,CAC9C,ECwDA,I,IAAA,EAtGA,cAAmBL,EACfX,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,GACZC,KAAKiD,OAAS,KACdjD,KAAKkD,QAAU,KACflD,KAAKmD,cAAgB,KACrBnD,KAAKoD,QAAU,KACfpD,KAAKqD,MAAQ,EACbrD,KAAKsD,WAAa,EAClBtD,KAAKuD,MAAQ,KACbvD,KAAKwD,QAAU,GACfxD,KAAKyD,UAAW,EAChBzD,KAAK0D,aAAc,EACnB1D,KAAK2D,aAAc,EACnB3D,KAAK4D,MAAQ,KACb5D,KAAK6D,KAAO,IAChB,CAEAC,eACI9D,KAAKuD,MAAQ,KACbvD,KAAKwD,QAAU,EACnB,CAEAO,WACI/D,KAAKqD,MAAQ,EACbrD,KAAK2D,aAAc,EACnB3D,KAAKiD,OAASjD,KAAKoD,QAAQH,OAC3BjD,KAAKkD,QAAUlD,KAAKoD,QAAQF,OAChC,CAEAc,YACIhE,KAAKqD,MAAQ,EACbrD,KAAKiD,OAASjD,KAAKmD,cAAcF,OACjCjD,KAAKkD,QAAUlC,KAAKiD,IAAIjE,KAAKmD,cAAcD,QAASlD,KAAKkD,QAC7D,CAEAgB,WAMI,OALAlE,KAAKuD,MAAQvD,KAAKmE,cAClBnE,KAAKuD,MAAMa,OAAOC,KAAKC,UAAUtE,KAAKD,MACtCC,KAAKuD,MAAQ,IAAIvD,KAAKuD,OAAOgB,KAAIC,GACtBH,KAAKI,MAAMD,KAEfxE,KAAKuD,KAChB,CAEAY,cAAmE,IAAvDO,EAAe,UAAH,6CAAG,IAAIC,IAAOC,EAAU,UAAH,6CAAG,EAAG7E,EAAM,UAAH,6CAAGC,KAAKD,IAC1D,GAAgB,IAAZ6E,EAAiB,OAAOF,EAE5B,IAAK,IAAI7D,EAAEd,EAAIc,EAAE,EAAGA,GAAKd,EAAIc,EAAI,EAAGA,IAChC,IAAK,IAAIE,EAAEhB,EAAIgB,EAAE,EAAGA,GAAKhB,EAAIgB,EAAI,EAAGA,IAAK,CACrC,IAAI8D,EAAS,CAAChE,EAAGA,EAAGE,EAAGA,GACnByB,EAAUqC,KAAY7E,KAAK8E,QAAQD,KAC9BH,EAAaK,IAAIV,KAAKC,UAAUO,KACjCH,EAAaM,IAAIX,KAAKC,UAAUO,IAEpCH,EAAe1E,KAAKmE,YAAYO,EAAcE,EAAQ,EAAGC,GAEjE,CAGJ,OAAOH,CACX,CAEAO,aACI,IAAK,IAAIpE,EAAEb,KAAKD,IAAIc,EAAEb,KAAKsD,WAAYzC,GAAKb,KAAKD,IAAIc,EAAIb,KAAKsD,WAAYzC,IACtE,IAAK,IAAIE,EAAEf,KAAKD,IAAIgB,EAAEf,KAAKsD,WAAYvC,GAAKf,KAAKD,IAAIgB,EAAIf,KAAKsD,WAAYvC,IAAK,CAC3E,IAAI8D,EAAS,CAAChE,EAAGA,EAAGE,EAAGA,GACvB,GAAIyB,EAAUqC,GAAS,CACnB,IAAIjC,EAAS5C,KAAK4D,MAAM/B,KAAKQ,IAAIwC,GAC7B7E,KAAK8E,QAAQD,IAAWjC,EAAOE,OAAOhD,OAASE,KAAKF,MACpDE,KAAKwD,QAAQvB,KAAK4C,EAE1B,CACJ,CAEJ,OAAO7E,KAAKwD,OAChB,CAEAsB,QAAQ/E,GACJ,IAAI6C,EAAS5C,KAAK4D,MAAM/B,KAAKQ,IAAItC,GACjC,OAAI6C,EAAOG,OAAS,GAEC,SADFH,EAAOE,OAAO3C,YAMrC,CAEA+E,aAAaC,GACT,OAAOnF,KAAKF,OAASqF,EAAcrF,MACjB,GAAdE,KAAKqD,QACHrD,KAAKF,OAASa,EAAAA,aAAqBX,KAAKD,IAAIc,EAAIF,EAAAA,YAAoB,GACrEX,KAAKF,OAASa,EAAAA,YAAoBX,KAAKD,IAAIc,GAAKF,EAAAA,YAAoB,EAC7E,CAEAyE,aACI,OAAQpF,KAAKF,OAASa,EAAAA,aAAqBX,KAAKD,IAAIc,GAAKF,EAAAA,YAAoB,GACxEX,KAAKF,OAASa,EAAAA,YAAoBX,KAAKD,IAAIc,EAAIF,EAAAA,YAAoB,CAC5E,GCzFJ,EAZA,cAAqB0E,EACjBxF,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,GACZC,KAAKiD,OAAS,EACdjD,KAAKkD,QAAU,EACflD,KAAKsD,WAAa,EAClBtD,KAAKoD,QAAU,CAACH,OAAQ,EAAGC,QAAS,GACpClD,KAAKmD,cAAgB,CAACF,OAAQ,EAAGC,QAAS,GAC1ClD,KAAKC,MAAMS,IAAM,wBACrB,GCKJ,EAdA,cAAuB2E,EACnBxF,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,GACZC,KAAKiD,OAAS,EACdjD,KAAKkD,QAAU,EAIflD,KAAKoD,QAAU,CAACH,OAAQ,EAAGC,QAAS,GACpClD,KAAKmD,cAAgB,CAACF,OAAQ,EAAGC,QAAS,GAC1ClD,KAAKC,MAAMS,IAAM,0BACrB,GCAJ,EAXA,cAAuB2E,EACnBxF,YAAYC,EAAMC,GACdU,MAAMX,EAAMC,GACZC,KAAKiD,OAAS,EACdjD,KAAKkD,QAAU,EACflD,KAAKoD,QAAU,CAACH,OAAQ,EAAGC,QAAS,GACpClD,KAAKmD,cAAgB,CAACF,OAAQ,EAAGC,QAAS,GAC1ClD,KAAKC,MAAMS,IAAM,0BACrB,GCAJ,MAAM4E,EAGFzF,YAAY0F,EAAMC,EAAKC,GACnBzF,KAAKuF,KAAOA,EACZvF,KAAKyF,GAAKA,EACVzF,KAAKwF,IAAMA,EACXxF,KAAK0F,MAAQ,KACb1F,KAAK2F,OAAS3F,KAAK4F,YACnB5F,KAAK6F,YACL7F,KAAK8F,SAAS,CAACjF,EAAGF,EAAAA,YAAmBI,EAAGJ,EAAAA,aACxCX,KAAK+F,YAAc/F,KAAKgG,uBAC5B,CAEAC,UAAUV,GACNvF,KAAKuF,KAAOA,EACZvF,KAAK0F,MAAQ,KACb1F,KAAK6F,WACT,CAEAK,aACIlG,KAAKwF,IAAIW,UAAU,EAAG,EAAGnG,KAAKwF,IAAIY,OAAOC,MAAOrG,KAAKwF,IAAIY,OAAOE,OACpE,CAEAT,UAAUU,EAASC,GACfxG,KAAKkG,aACLlG,KAAKyG,kBAELzG,KAAK2F,OAAOe,WAAWC,OAAOJ,EAASC,EAC3C,CAEAC,kBACI,MAAMG,EAAI,GACVA,EAAE3E,KAAK4E,SAASC,cAAc,WAC9BF,EAAE3E,KAAK4E,SAASC,cAAc,WAC9BF,EAAE3E,KAAK4E,SAASC,cAAc,gBAC9BF,EAAE3E,KAAK4E,SAASC,cAAc,gBAE9BF,EAAEG,SAAQH,IAAUA,IAAIA,EAAEI,MAAMC,WAAa,SAAQ,GACzD,CAEAC,uBAAuBX,EAASC,GAC5B,IAAK,IAAI3F,EAAE,EAAGA,EAAIF,EAAAA,YAAmBE,IACjC,IAAK,IAAIE,EAAE,EAAGA,EAAIJ,EAAAA,WAAkBI,IAChCf,KAAKmH,eAAepG,EAAGF,EAAG,aAC1Bb,KAAKoH,cAAc,CAACvG,EAAGA,EAAGE,EAAGA,GAAIwF,EAASC,GAGlDxG,KAAKqH,cAELrH,KAAKsH,oBAELtH,KAAKwF,IAAI+B,KAAO,mBAChBvH,KAAKuF,KAAKJ,cAAcrF,OAASa,EAAAA,WAAmBX,KAAKwF,IAAIgC,UAAY,MAAQxH,KAAKwF,IAAIgC,UAAY,OACtG,IAAIC,EAAM,kBAAoBzH,KAAKuF,KAAKmC,aAAaC,WACrD3H,KAAKwF,IAAIoC,YAAc,UACvB5H,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAIsC,WAAWL,EAAK,IAAK9G,EAAAA,YAAkB,IAAO2E,EAAKyC,YAC5D/H,KAAKwF,IAAIwC,SAASP,EAAK,IAAK9G,EAAAA,YAAkB,IAAO2E,EAAKyC,YAE1D/H,KAAKwF,IAAI+B,KAAO,mBAChBE,EAAM,WAAazH,KAAKuF,KAAKJ,cAAc8C,MAAMlF,OAAO4E,WAAa,KACrE3H,KAAKwF,IAAIsC,WAAWL,EAAK,IAAK9G,EAAAA,YAAkB,KAAQ2E,EAAKyC,YAC7D/H,KAAKwF,IAAIwC,SAASP,EAAK,IAAK9G,EAAAA,YAAkB,KAAQ2E,EAAKyC,WAC/D,CAEAV,cACIrH,KAAKwF,IAAIoC,YAAc,eACvB5H,KAAKwF,IAAI0C,YACTlI,KAAKwF,IAAI2C,OAAO,EAAGxH,EAAAA,YAAoB,EAAI2E,EAAKyC,YAChD/H,KAAKwF,IAAI4C,QAAQzH,EAAAA,YAAkB,GAAK2E,EAAKyC,WAAYpH,EAAAA,YAAoB,EAAI2E,EAAKyC,YACtF/H,KAAKwF,IAAI6C,QACb,CAEAf,oBACItH,KAAKwF,IAAIgC,UAAY,eACrBxH,KAAKwF,IAAI8C,SACa,EAAlBhD,EAAKyC,YACJpH,EAAAA,YAAkB,KAAQ2E,EAAKyC,WACd,EAAlBzC,EAAKyC,WACa,GAAlBzC,EAAKyC,YACT/H,KAAKwF,IAAIoC,YAAc,iBACvB5H,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAI+C,WACa,EAAlBjD,EAAKyC,YACJpH,EAAAA,YAAkB,KAAQ2E,EAAKyC,WACd,EAAlBzC,EAAKyC,WACa,GAAlBzC,EAAKyC,YACT/H,KAAKwF,IAAI+B,KAAO,mBAChBvH,KAAKwF,IAAIgC,UAAY,UACrBxH,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAIwC,SAAS,MAAO,KAAO1C,EAAKyC,YAAapH,EAAAA,YAAkB,KAAQ2E,EAAKyC,YACjF/H,KAAKwF,IAAIwC,SAAS,OAAQ,KAAO1C,EAAKyC,YAAapH,EAAAA,YAAkB,KAAQ2E,EAAKyC,WACtF,CAEAjC,SAAS/F,GACL,MAAM8B,EAAOgF,SAAS2B,cAAc,MACpC3G,EAAK4G,UAAUzD,IAAI,QAEnBnD,EAAKmF,MAAM0B,SAAW,WACtB7G,EAAKmF,MAAM2B,MAAQ,OACnB9G,EAAKmF,MAAM4B,OAAS,oBACpB/G,EAAKmF,MAAMX,MAAQ,sBACnBxE,EAAKmF,MAAMV,OAAS,QAEpB,MAAMuC,EAAOhC,SAAS2B,cAAc,MACpCK,EAAKJ,UAAUzD,IAAI,QACnB6D,EAAK7B,MAAM8B,gBAAkB,eAC7BD,EAAK7B,MAAM+B,OAAS,2BACpBF,EAAK7B,MAAMV,OAAS,mBACpBuC,EAAK7B,MAAMX,MAAQ,mBACnBwC,EAAK7B,MAAMgC,KAAO,MAElBH,EAAK7B,MAAMiC,UAAY,OACvBJ,EAAK7B,MAAMkC,OAAS,UACpBL,EAAKM,UAAY,OACjBN,EAAK7B,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAS,iBAEpCmD,EAAK7B,MAAMoC,MAAQ,UACnBP,EAAK7B,MAAMqC,UAAY,SACvBR,EAAK7B,MAAMsC,WAAa,OACxBT,EAAKJ,UAAUzD,IAAI,UAEnBnD,EAAK0H,YAAYV,GAEjBhC,SAAS2C,uBAAuB,cAAc,GAAGD,YAAY1H,GAE7D7B,KAAKyJ,gBAAgB1J,EAAK8I,GAC1B,MAAMa,EAAU1J,KAAK2J,UAAU5J,GACzB6J,EAAW5J,KAAK6J,UAAU9J,GAE1B+J,EAAeC,OAAOC,SAC5BD,OAAOC,SAAW,KACdF,IAEI9J,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjBgE,EAAQ1C,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBAC3CgE,EAAQ1C,MAAMsC,WAAa,OAC3BM,EAAS5C,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBAC5CkE,EAAS5C,MAAMsC,WAAa,MAAM,CAE1C,CAEAG,gBAAgB1J,EAAK8I,GACjB,MAAMoB,EAAOpD,SAAS2B,cAAc,MACpCyB,EAAKxB,UAAUzD,IAAI,QAEnBiF,EAAKjD,MAAM0B,SAAW,WACtBuB,EAAKjD,MAAM2B,MAAQ,OACnBsB,EAAKjD,MAAM4B,OAAS,qBACpBqB,EAAKjD,MAAMX,MAAQ,sBACnB4D,EAAKjD,MAAMV,OAAS,oBAEpB,MAAM4D,EAAQrD,SAAS2B,cAAc,MACrCxI,KAAKmK,WAAW,QAASD,EAAO,CAACnJ,EAAG,KAAMF,EAAG,SAC7CqJ,EAAMzB,UAAUzD,IAAI,SACpB,MAAMoF,EAAQvD,SAAS2B,cAAc,MACrCxI,KAAKmK,WAAW,QAASC,EAAO,CAACrJ,EAAG,KAAMF,EAAG,OAC7CuJ,EAAM3B,UAAUzD,IAAI,SAEpBkF,EAAMlD,MAAMO,KAAO,GAAGvH,KAAK0F,MAAQ,iBACnCwE,EAAMlD,MAAMsC,WAAa,OACzBc,EAAMpD,MAAMO,KAAO,GAAGvH,KAAK0F,MAAQ,iBACnC0E,EAAMpD,MAAMsC,WAAa,OAEzBW,EAAKV,YAAYW,GACjBD,EAAKV,YAAYa,GACjBH,EAAKjD,MAAMC,WAAa,SAExB8C,OAAOC,SAAW,KACdhK,KAAK0F,MAAQ1E,KAAKiD,IACd8F,OAAOM,YAAcrK,KAAKwF,IAAIY,OAAOE,OACrCyD,OAAOO,WAAatK,KAAKwF,IAAIY,OAAOC,OAEpCrG,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjBmD,EAAK7B,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAS,iBACpCmD,EAAK7B,MAAMsC,WAAa,OAExBY,EAAMlD,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAS,iBACrCwE,EAAMlD,MAAMsC,WAAa,OACzBc,EAAMpD,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAS,iBACrC0E,EAAMpD,MAAMsC,WAAa,MAAM,EAInCzC,SAAS2C,uBAAuB,cAAc,GAAGD,YAAYU,EACjE,CAEAN,UAAU5J,GACN,MAAMwK,EAAQ1D,SAAS2B,cAAc,MACrC+B,EAAM9B,UAAUzD,IAAI,cACpBhF,KAAKwK,mBAAmB,gCAAiCD,EAAOA,GAEhE,MAAML,EAAQrD,SAAS2B,cAAc,MAerC,OAdAxI,KAAKyK,wBAAwB,80BAC7BP,EAAOK,GACPL,EAAMlD,MAAMO,KAAO,mBACfvH,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjBwE,EAAMlD,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBACzCwE,EAAMlD,MAAMsC,WAAa,OACzBY,EAAMzB,UAAUzD,IAAI,YAEpBuF,EAAMhB,YAAYW,GAGlBrD,SAAS2C,uBAAuB,cAAc,GAAGD,YAAYgB,GACtDL,CACX,CAEAL,UAAU9J,GACN,MAAMwK,EAAQ1D,SAAS2B,cAAc,MACrC+B,EAAM9B,UAAUzD,IAAI,cAEpBhF,KAAKwK,mBAAmB,0BAA2BD,EAAOA,GAE1D,MAAMH,EAAQvD,SAAS2B,cAAc,MAarC,OAZAxI,KAAKyK,wBAAwB,mRAAoRL,EAAOG,GACpTvK,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjB0E,EAAMpD,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBACzC0E,EAAMpD,MAAMsC,WAAa,OACzBc,EAAM3B,UAAUzD,IAAI,YAEpBuF,EAAMhB,YAAYa,GAClBG,EAAMvD,MAAMC,WAAa,SAEzBJ,SAAS2C,uBAAuB,cAAc,GAAGD,YAAYgB,GACtDH,CACX,CAEAI,mBAAmB/C,EAAKiD,EAAKH,GACzBG,EAAI1D,MAAMX,MAAQ,mBAClBqE,EAAI1D,MAAMV,OAAS,kBACnBoE,EAAI1D,MAAM8B,gBAAkB,eAC5B4B,EAAI1D,MAAM+B,OAAS,2BACnB2B,EAAI1D,MAAM0B,SAAW,WACrBgC,EAAI1D,MAAMgC,KAAO,MACjB0B,EAAI1D,MAAM2D,IAAM,MAChBD,EAAI1D,MAAM4D,UAAY,wBACtBF,EAAI1D,MAAM6D,OAAS,MACnBH,EAAI1D,MAAMiC,UAAY,OACtByB,EAAI1D,MAAMkC,OAAS,UACnBwB,EAAIvB,UAAY1B,EACZzH,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjBgF,EAAI1D,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBACvCgF,EAAI1D,MAAMoC,MAAQ,UAClBsB,EAAI1D,MAAMqC,UAAY,SACtBqB,EAAI1D,MAAMsC,WAAa,OAEvB,MAAMQ,EAAeC,OAAOC,SAC5BD,OAAOC,SAAW,KACdF,IAEI9J,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjBgF,EAAI1D,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBACvCgF,EAAI1D,MAAMsC,WAAa,MAAM,CAErC,CAEAmB,wBAAwBhD,EAAKiD,EAAKH,GAC9BG,EAAI1D,MAAMX,MAAQ,mBAClBqE,EAAI1D,MAAMV,OAAS,kBACnBoE,EAAI1D,MAAM8B,gBAAkB,iBAC5B4B,EAAI1D,MAAM+B,OAAS,2BACnB2B,EAAI1D,MAAM0B,SAAW,WACrBgC,EAAI1D,MAAMgC,KAAO,MACjB0B,EAAI1D,MAAM2D,IAAM,MAChBD,EAAI1D,MAAM4D,UAAY,wBAEtBF,EAAI1D,MAAMiC,UAAY,OACtByB,EAAI1D,MAAMkC,OAAS,UACnBwB,EAAIvB,UAAY1B,EAChBiD,EAAI1D,MAAMO,KAAO,mBACjBmD,EAAI1D,MAAMoC,MAAQ,OACtB,CAEAe,WAAW1C,EAAKoB,EAAM9I,GAClB8I,EAAK7B,MAAM8B,gBAAkB,eAC7BD,EAAK7B,MAAM+B,OAAS,2BACpBF,EAAK7B,MAAMX,MAAQ,OACnBwC,EAAK7B,MAAMV,OAAS,OACpBuC,EAAK7B,MAAM0B,SAAW,WACtBG,EAAK7B,MAAM2B,MAAQ5I,EAAIgB,EACvB8H,EAAK7B,MAAM4B,OAAS7I,EAAIc,EACxBgI,EAAK7B,MAAM6D,OAAS,MACpBhC,EAAK7B,MAAMiC,UAAY,OACvBJ,EAAK7B,MAAMkC,OAAS,UACpBL,EAAKM,UAAY1B,EACjBoB,EAAK7B,MAAMoC,MAAQ,UACnBP,EAAK7B,MAAMqC,UAAY,QAC3B,CAEAyB,uBACI,IAAIrD,EAAM,0BAGV,OAFAA,GAAOzH,KAAKuF,KAAKJ,cAAcrF,OAASa,EAAAA,YAAoB,MAAQ,OACpE8G,GAAO,WACAA,CACX,CAEAzB,wBACI,MAAMU,EAAaG,SAAS2B,cAAc,OAC1C9B,EAAW+B,UAAUzD,IAAI,mBACzB0B,EAAWM,MAAMX,MAAQ,OACzBK,EAAWM,MAAMV,OAAS,OAC1BI,EAAWM,MAAM0B,SAAW,WAC5BhC,EAAWM,MAAM2D,IAAM,MACvBjE,EAAWM,MAAMC,WAAa,SAE9B,MAAM8D,EAASlE,SAAS2B,cAAc,MACtCuC,EAAOtC,UAAUzD,IAAI,eAErB+F,EAAO/D,MAAMX,MAAQ,mBACrB0E,EAAO/D,MAAMV,OAAS,kBACtByE,EAAO/D,MAAM8B,gBAAkB,eAC/BiC,EAAO/D,MAAM+B,OAAS,2BACtBgC,EAAO/D,MAAM0B,SAAW,WACxBqC,EAAO/D,MAAMgC,KAAO,MACpB+B,EAAO/D,MAAM2D,IAAM,MACnBI,EAAO/D,MAAM4D,UAAY,wBACzBG,EAAO/D,MAAM6D,OAAS,MACtBE,EAAO/D,MAAMgE,YAAc,OAC3BD,EAAO/D,MAAMiE,aAAeF,EAAO/D,MAAMgE,YACzCD,EAAO/D,MAAMiC,UAAY,OACzB8B,EAAO/D,MAAMkC,OAAS,UACtB6B,EAAO/D,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,iBAC1CqF,EAAO/D,MAAMoC,MAAQ,UACrB2B,EAAO/D,MAAMqC,UAAY,SAEzB,MAAM6B,EAASrE,SAAS2B,cAAc,MACtC0C,EAAOzC,UAAUzD,IAAI,eACrBkG,EAAO/B,UAAY,KACnB+B,EAAOlE,MAAMX,MAAQ,MACrB6E,EAAOlE,MAAMV,OAAS,kBACtB4E,EAAOlE,MAAM8B,gBAAkB,iBAC/BoC,EAAOlE,MAAM+B,OAAS,2BACtBmC,EAAOlE,MAAMmE,WAAa,OAC1BD,EAAOlE,MAAMoE,YAAc,OAC3BF,EAAOlE,MAAMqE,UAAY,MACzBH,EAAOlE,MAAMoC,MAAQ,QAErB,MAAMU,EAAeC,OAAOC,SAgB5B,OAfAD,OAAOC,SAAW,KACdF,IAEI9J,KAAK0F,MAAQ,MACb1F,KAAK0F,MAAQ,KAEjBqF,EAAO/D,MAAMO,KAAQ,GAAGvH,KAAK0F,MAAQ,EAAK,gBAAgB,EAI9DqF,EAAOxB,YAAY2B,GACnBxE,EAAW6C,YAAYwB,GACvBlE,SAAS2C,uBAAuB,cAAc,GAAGD,YAAY7C,GAGtDA,CACX,CAEA4E,oBACI,IAAIC,EAAM,IAAIrL,MACdqL,EAAI7K,IAAM,uBACV6K,EAAI5E,OAAS,KACT3G,KAAKwF,IAAIgG,UACLD,EACAjG,EAAKyC,WAAa/G,KAAKC,OAAON,EAAAA,WAAiB,GAAK,GACpD2E,EAAKyC,YAAc/G,KAAKC,OAAON,EAAAA,YAAkB,GAAK,GAAG,KACvC,EAAlB2E,EAAKyC,WAAkC,IAAlBzC,EAAKyC,YAC9B/H,KAAKwF,IAAI0C,YACTlI,KAAKwF,IAAI6C,SAETrI,KAAKwF,IAAI+B,KAAO,mBAChBvH,KAAKwF,IAAIqC,UAAY,EACrB,IAAIJ,EAAM,GACNzH,KAAKuF,KAAKJ,cAAcrF,OAASa,EAAAA,aACjCX,KAAKwF,IAAIgC,UAAY,OACrBxH,KAAKwF,IAAIoC,YAAc,WACvBH,GAAO,SAEPzH,KAAKwF,IAAIgC,UAAY,MACrBxH,KAAKwF,IAAIoC,YAAc,SACvBH,GAAO,OAEXA,GAAO,YACPzH,KAAKwF,IAAIsC,WAAWL,EAChBnC,EAAKyC,YAAcpH,EAAAA,WAAmB,EAAI,GAC1C2E,EAAKyC,YAAcpH,EAAAA,YAAoB,EAAI,MAC/CX,KAAKwF,IAAIwC,SAASP,EACdnC,EAAKyC,YAAcpH,EAAAA,WAAmB,EAAI,GAC1C2E,EAAKyC,YAAcpH,EAAAA,YAAoB,EAAI,MAE/CX,KAAKyL,qBAAqB,CAElC,CAEAA,sBACIzL,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAIgC,UAAY,iBACrBxH,KAAKwF,IAAIoC,YAAc,UACvB5H,KAAKwF,IAAI8C,SACLhD,EAAKyC,YAAcpH,EAAAA,WAAmB,EAAI,KAC1C2E,EAAKyC,WAAc/G,KAAKC,MAAON,EAAAA,YAAqB,GAClC,IAAlB2E,EAAKyC,WACa,GAAlBzC,EAAKyC,YACT/H,KAAKwF,IAAI+C,WACLjD,EAAKyC,YAAcpH,EAAAA,WAAmB,EAAI,KAC1C2E,EAAKyC,WAAc/G,KAAKC,MAAON,EAAAA,YAAqB,GAClC,IAAlB2E,EAAKyC,WACa,GAAlBzC,EAAKyC,YACT/H,KAAKwF,IAAIoC,YAAc,OACvB5H,KAAKwF,IAAI+B,KAAO,mBAChBvH,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAIgC,UAAY,QACrBxH,KAAKwF,IAAIoC,YAAc,OACvB5H,KAAKwF,IAAIsC,WAAW,cAChBxC,EAAKyC,YAAcpH,EAAAA,WAAmB,EAAI,IAC1C2E,EAAKyC,YAAcpH,EAAAA,YAAoB,EAAI,KAC/CX,KAAKwF,IAAIwC,SAAS,cACd1C,EAAKyC,YAAcpH,EAAAA,WAAmB,EAAI,IAC1C2E,EAAKyC,YAAcpH,EAAAA,YAAoB,EAAI,IACnD,CAEA+K,wBAAwB3L,GACpBC,KAAKwF,IAAIgC,UAAY,eACrBxH,KAAKwF,IAAI8C,SACLhD,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,WAAahI,EAAIc,EACJ,EAAlByE,EAAKyC,WACa,IAAlBzC,EAAKyC,YACT/H,KAAKwF,IAAIoC,YAAc,iBACvB5H,KAAKwF,IAAI+C,WACLjD,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,WAAahI,EAAIc,EACJ,EAAlByE,EAAKyC,WACa,IAAlBzC,EAAKyC,YACT/H,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAI+B,KAAO,mBAChBvH,KAAKwF,IAAIgC,UAAY,UACrBxH,KAAKwF,IAAIwC,SAAS,WACd1C,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,YAAchI,EAAIc,EAAI,KACnC,CAEA8K,qBAAqB5L,GACjB,IAAI8E,EAAS7E,KAAK4L,mBAAmB7L,GACrCC,KAAKF,OAASa,EAAAA,WAAmBX,KAAKwF,IAAIgC,UAAY,MAAQxH,KAAKwF,IAAIgC,UAAY,OACnF,IAAIqE,EAAiB,GACjB7L,KAAK2F,OAAOxD,QAAQwE,OAAO9B,GAE/B7E,KAAKwF,IAAI+B,KAAO,mBAChBvH,KAAKwF,IAAIgC,UAAY,QACrBxH,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAIwC,SAAS,iBACd1C,EAAKyC,YAAclD,EAAO9D,EAAI,KAC9BuE,EAAKyC,YAAclD,EAAOhE,EAAI,MAElC,IAAIiL,EAAM,IAAIC,EAAS/L,KAAKuF,KAAKJ,cAAcrF,KAAM,CAACe,EAAGgE,EAAOhE,EAAE,GAAKE,EAAG8D,EAAO9D,IAC7EiL,EAAO,IAAIC,EAAOjM,KAAKuF,KAAKJ,cAAcrF,KAAM,CAACe,EAAGgE,EAAOhE,EAAE,GAAKE,EAAG8D,EAAO9D,EAAE,IAC9EmL,EAAM,IAAIC,EAASnM,KAAKuF,KAAKJ,cAAcrF,KAAM,CAACe,EAAGgE,EAAOhE,EAAE,GAAKE,EAAG8D,EAAO9D,EAAE,IAanF,OAZA+K,EAAIlI,MAAQ5D,KAAKuF,KAAK3B,MACtBoI,EAAKpI,MAAQ5D,KAAKuF,KAAK3B,MACvBsI,EAAItI,MAAQ5D,KAAKuF,KAAK3B,MACtBkI,EAAIjI,KAAO7D,KAAKuF,KAAK1B,KACrBmI,EAAKnI,KAAO7D,KAAKuF,KAAK1B,KACtBqI,EAAIrI,KAAO7D,KAAKuF,KAAK1B,KACrBgI,EAAe5J,KAAK6J,GACpBD,EAAe5J,KAAK+J,GACpBH,EAAe5J,KAAKiK,GACpBL,EAAe9E,SAAUqF,IACrBA,EAAKC,KAAKrM,KAAKwF,IAAKxF,KAAKuF,KAAKJ,cAAc,IAEzC0G,CACX,CAEAD,mBAAmB7L,GACf,IAAI8E,EAAS,CAAC,EAGd,OAFU,IAAV9E,EAAIgB,EAAU8D,EAAO9D,EAAIhB,EAAIgB,EAAI,IAAO8D,EAAO9D,EAAIhB,EAAIgB,EAAI,KACjD,IAAVhB,EAAIc,EAAUgE,EAAOhE,EAAId,EAAIc,EAAI,GAAMgE,EAAOhE,EAAId,EAAIc,EAAI,EACnDgE,CACX,CAEAyH,YAAYvM,GACRC,KAAKwF,IAAIoC,YAAc,SACvB5H,KAAKwF,IAAIqC,UAAY,GACrB7H,KAAKwF,IAAI+C,WACLjD,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,WAAahI,EAAIc,EACtByE,EAAKyC,WACLzC,EAAKyC,WAEb,CAEAwE,mBAAmBxM,GACfC,KAAKmH,eAAepH,EAAIgB,EAAGhB,EAAIc,EAAG,WAAY,iBAClD,CAEA2L,qBAAqBzM,GACjBC,KAAKmH,eAAepH,EAAIgB,EAAGhB,EAAIc,EAAG,iBAAkB,eACxD,CAEAuG,cAAcrH,EAAKwG,EAASC,GACxB,IAAIiG,EAAazM,KAAKuF,KAAK3B,MAAM/B,KAAKQ,IAAItC,GAC1C,IAAK,IAAIiC,EAAE,EAAGA,EAAIyK,EAAW1J,OAAQf,IACjCyK,EAAWzK,GAAGqK,KAAKrM,KAAKwF,IAAKxF,KAAKuF,KAAKJ,cAAeoB,EAASC,GAEnExG,KAAKwF,IAAI0C,WACb,CAEAf,eAAepG,EAAGF,EAAG6L,EAAcC,GAC3BA,IACA3M,KAAKwF,IAAIgC,UAAYmF,EACrB3M,KAAKwF,IAAIoH,YAAc,GACvB5M,KAAKwF,IAAI8C,SACLhD,EAAKyC,WAAahH,EAClBuE,EAAKyC,WAAalH,EAClByE,EAAKyC,WACLzC,EAAKyC,aAGb/H,KAAKwF,IAAIoC,YAAc8E,EACvB1M,KAAKwF,IAAIqC,UAAY,EACrB7H,KAAKwF,IAAI+C,WACLjD,EAAKyC,WAAahH,EAClBuE,EAAKyC,WAAalH,EAClByE,EAAKyC,WACLzC,EAAKyC,YAET/H,KAAKwF,IAAIoH,YAAc,CAC3B,CAEAhH,YACI,IAAIiH,EAAalM,EAAAA,WAAmB2E,EAAKyC,WACrC+E,GAAenM,EAAAA,YAAkB,GAAK2E,EAAKyC,WAC/C/H,KAAKwF,IAAIY,OAAOC,MAAQwG,EACxB7M,KAAKwF,IAAIY,OAAOE,OAASwG,EACzB9M,KAAK0F,MAAQ1E,KAAKiD,IACd8F,OAAOM,YAAcrK,KAAKwF,IAAIY,OAAOE,OACrCyD,OAAOO,WAAatK,KAAKwF,IAAIY,OAAOC,OAGxC,IAAIV,EAAS,CAAC,EA0Bd,OAzBAA,EAAOe,WAAa,IAAIxG,MACxByF,EAAOe,WAAWhG,IAAM,yBACxBiF,EAAOe,WAAWC,OAAS,CAACJ,EAASC,KACjCxG,KAAKwF,IAAIgG,UACL7F,EAAOe,WAAY,EAAG,EACvBmG,EAAYC,EACZ,EAAG,EACHD,EAAYC,GACf9M,KAAKwF,IAAI0C,YACTlI,KAAKwF,IAAI6C,SACTrI,KAAKkH,uBAAuBX,EAASC,EAAW,EAGpDb,EAAOxD,QAAU,IAAIjC,MACrByF,EAAOxD,QAAQzB,IAAM,uBACrBiF,EAAOxD,QAAQwE,OAAU5G,IACrBC,KAAKwF,IAAIgG,UACL7F,EAAOxD,QACPmD,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,WAAahI,EAAIc,EACJ,EAAlByE,EAAKyC,WAAkC,IAAlBzC,EAAKyC,YAC9B/H,KAAKwF,IAAI0C,YACTlI,KAAKwF,IAAI6C,QAAQ,EAGd1C,CACX,CAMAoH,WAAWvH,GACQqB,SAASC,cAAc,WAC/BkG,iBAAiB,QAAShN,KAAKiN,aAAaC,KAAKlN,OACxD,MAAMoK,EAAQvD,SAASC,cAAc,UACjCsD,GAAQA,EAAM4C,iBAAiB,QAAShN,KAAKmN,YAAYD,KAAKlN,OAClE,MAAMkK,EAAQrD,SAASC,cAAc,UACjCoD,GAAQA,EAAM8C,iBAAiB,QAAShN,KAAKoN,YAAYF,KAAKlN,OAClEwF,EAAIY,OAAO4G,iBAAiB,QAAShN,KAAKqN,YAAYH,KAAKlN,OAC3D6G,SAASmG,iBAAiB,QAAShN,KAAKsN,iBAAiBJ,KAAKlN,OAC9DA,KAAKuN,iBACT,CAEAA,kBACI,MAAMC,EAAkB3G,SAASC,cAAc,oBAC3C0G,GACAA,EAAgBR,iBAAiB,QAAShN,KAAKyN,sBAAsBP,KAAKlN,KAAMwN,IAEpF,MAAME,EAAc7G,SAASC,cAAc,gBAI3C,OAHI4G,GACAA,EAAYV,iBAAiB,QAAShN,KAAK2N,kBAAkBT,KAAKlN,KAAMwN,IAErEE,CACX,CAEAP,YAAYS,GACR,MAAMhH,EAAIC,SAASC,cAAc,eACjC9G,KAAKyG,kBACLG,EAAEI,MAAMC,WAAa,SACzB,CAEAmG,YAAYQ,GACR,MAAMhH,EAAIC,SAASC,cAAc,eACjC9G,KAAKyG,kBACLG,EAAEI,MAAMC,WAAa,SACzB,CAEAgG,aAAaW,GACT,MAAMC,EAAKhH,SAASC,cAAc,UAC5BgH,EAAKjH,SAASC,cAAc,UAElC9G,KAAKyG,kBACLoH,EAAG7G,MAAMC,WAAa,UACtB6G,EAAG9G,MAAMC,WAAa,SAC1B,CAEAoG,YAAYO,GACR,IAAI7M,EAAIC,KAAKC,MAAM2M,EAAMG,SAAWzI,EAAKyC,WAAa/H,KAAK0F,QACvD7E,EAAIG,KAAKC,MAAM2M,EAAMI,SAAW1I,EAAKyC,WAAa/H,KAAK0F,QACvDuI,EAASL,EAAMG,SAAWzI,EAAKyC,WAAa/H,KAAK0F,OAEjD3F,EAAM,CAACc,IAAGE,KACVmN,EAAW,CAACrN,EAFH+M,EAAMI,SAAW1I,EAAKyC,WAAa/H,KAAK0F,OAE1B3E,EAAGkN,GAE1BjO,KAAKuF,KAAK3B,MAAMtB,QL3nBrB,SAAuBvC,GACzB,OAAOA,EAAIgB,EAAIJ,EAAAA,WAAmB,EAAI,KACnCZ,EAAIgB,EAAIJ,EAAAA,WAAmB,EAAI,KAC/BZ,EAAIc,EAAIG,KAAKC,MAAON,EAAAA,YAAqB,IACzCZ,EAAIc,EAAIG,KAAKC,MAAON,EAAAA,YAAqB,GAAK,EACtD,CKwnBgBwN,CAAcD,KACdlO,KAAKuF,KAAK6I,UAAUpO,MACpBA,KAAK6F,cAGT7F,KAAK6F,YACDrD,EAAUzC,IACVC,KAAKuF,KAAKC,IAAIgB,WAAazG,EAC3BC,KAAKuF,KAAKC,IAAI6I,SAAWH,EACzBlO,KAAKuF,KAAK+I,gBL5oBnB,SAAkBvO,GACrB,OAAOA,EAAIc,EAAIF,EAAAA,YAAoB,KAC/BZ,EAAIc,EAAIF,EAAAA,YAAoB,KAC5BZ,EAAIgB,EAAI,GAAKhB,EAAIgB,EAAI,CAC7B,CKyoBuBwN,CAASL,KAChBlO,KAAKuF,KAAKiJ,gBACVxO,KAAK6F,aAGjB,CAEAyH,iBAAiBM,GACb,IAAK/G,SAASC,cAAc,eAAe2H,SAASb,EAAMc,QAAS,CAC/D1O,KAAK6F,YACL7F,KAAKuF,KAAKoJ,MAAQ,aAClB,MAAMnB,EAAkB3G,SAASC,cAAc,oBAC3C0G,IAAiBA,EAAgBxG,MAAMC,WAAa,SAC5D,CACJ,CAEA0G,kBAAkBH,EAAiBI,GAC/B5N,KAAKuF,KAAKiJ,gBACVhB,EAAgBxG,MAAMC,WAAa,SACnCjH,KAAK6F,WACT,CAEA4H,sBAAsBD,EAAiBI,GAC9B/G,SAASC,cAAc,gBAAgB2H,SAASb,EAAMc,UACvDlB,EAAgBxG,MAAMC,WAAa,SAE3C,E,EAnqBE3B,G,+SAAI,iB,mCACc,I,iDAAA,IA4sBxBlD,EAAAA,UAAAA,KAAyB,SAASoD,GAC9BxF,KAAKF,OAASa,EAAAA,WAAmB6E,EAAIgC,UAAY,MAAQhC,EAAIgC,UAAY,OACzEhC,EAAI8C,SACAhD,EAAKyC,WAAa/H,KAAKD,IAAIgB,EAAsB,GAAlBuE,EAAKyC,WACpCzC,EAAKyC,WAAa/H,KAAKD,IAAIc,EAAsB,GAAlByE,EAAKyC,WAClB,GAAlBzC,EAAKyC,WACa,GAAlBzC,EAAKyC,YAET/H,KAAKC,MAAM0G,OAAS,KAChBnB,EAAIgG,UACAxL,KAAKC,MACLqF,EAAKyC,WAAa/H,KAAKD,IAAIgB,EAC3BuE,EAAKyC,WAAa/H,KAAKD,IAAIc,EAC3ByE,EAAKyC,WAAYzC,EAAKyC,YAC1BvC,EAAI0C,YACJ1C,EAAI6C,QAAQ,EAEhBrI,KAAKC,MAAM0G,QACf,EAEAhF,EAAAA,UAAAA,KAAsB,SAAS6D,GAC3BxF,KAAKF,OAASa,EAAAA,WAAmB6E,EAAIgC,UAAY,MAAQhC,EAAIgC,UAAY,OACzEhC,EAAI0C,YACJ1C,EAAIoJ,IACAtJ,EAAKyC,WAAa/H,KAAKD,IAAIgB,EAAsB,GAAlBuE,EAAKyC,WACpCzC,EAAKyC,WAAa/H,KAAKD,IAAIc,EAAsB,GAAlByE,EAAKyC,WAClB,IAAlBzC,EAAKyC,WACL,EAAG,EAAM/G,KAAK6N,IAClBrJ,EAAIsJ,MACR,EAEAxN,EAAAA,UAAAA,KAA0B,SAASkE,GAC/BxF,KAAKC,MAAM0G,OAAS,KAChBnB,EAAIgG,UACAxL,KAAKC,MACLqF,EAAKyC,WAAa/H,KAAKD,IAAIgB,EAC3BuE,EAAKyC,WAAa/H,KAAKD,IAAIc,EAC3ByE,EAAKyC,WAAYzC,EAAKyC,YAC1BvC,EAAI0C,YACJ1C,EAAI6C,QAAQ,EAEhBrI,KAAKC,MAAM0G,QACf,EAuBAtB,EAAAA,UAAAA,KAAsB,SAASG,EAAKL,EAAeoB,EAASC,GACxDxG,KAAKF,OAASa,EAAAA,WAAmB6E,EAAIgC,UAAY,MAAQhC,EAAIgC,UAAY,OAEzExH,KAAKC,MAAM0G,OAAS,KAChBnB,EAAIgG,UACAxL,KAAKC,MACLqF,EAAKyC,WAAa/H,KAAKD,IAAIgB,EAC3BuE,EAAKyC,WAAa/H,KAAKD,IAAIc,EAC3ByE,EAAKyC,WAAYzC,EAAKyC,YAC1BvC,EAAI0C,YACJ1C,EAAI6C,SAlGZ,SAAmB+D,EAAM5G,EAAKzE,EAAGF,GAC7BuL,EAAKtM,OAASa,EAAAA,WAAmB6E,EAAIgC,UAAY,MAAQhC,EAAIgC,UAAY,OACzEhC,EAAI+B,KAAO,mBACX/B,EAAIoC,YAAc,UAClBpC,EAAIqC,UAAY,EAChBrC,EAAIsC,WACA,IAAIsE,EAAKnJ,OAAO0E,WAChBrC,EAAKyC,WAAahH,EAAsB,GAAlBuE,EAAKyC,WAC3BzC,EAAKyC,WAAalH,EAAsB,GAAlByE,EAAKyC,YAC/BvC,EAAIsC,WACA,IAAIsE,EAAKlJ,QAAQyE,WACjBrC,EAAKyC,WAAahH,EAAsB,GAAlBuE,EAAKyC,WAC3BzC,EAAKyC,WAAalH,EAAsB,IAAlByE,EAAKyC,YAC/BvC,EAAIwC,SACA,IAAIoE,EAAKnJ,OAAO0E,WAChBrC,EAAKyC,WAAahH,EAAsB,GAAlBuE,EAAKyC,WAC3BzC,EAAKyC,WAAalH,EAAsB,GAAlByE,EAAKyC,YAC/BvC,EAAIwC,SACA,IAAIoE,EAAKlJ,QAAQyE,WACjBrC,EAAKyC,WAAahH,EAAsB,GAAlBuE,EAAKyC,WAC3BzC,EAAKyC,WAAalH,EAAsB,IAAlByE,EAAKyC,WACnC,CA8EQgH,CAAU/O,KAAMwF,EAAKxF,KAAKD,IAAIgB,EAAGf,KAAKD,IAAIc,GACtCb,KAAKkF,aAAaC,KApH9B,SAA2BiH,EAAM5G,EAAKzE,EAAGF,GACrCuL,EAAKtM,OAASa,EAAAA,WAAmB6E,EAAIgC,UAAY,MAAQhC,EAAIgC,UAAY,OACzEhC,EAAI0C,YACJ1C,EAAIoJ,IACAtJ,EAAKyC,WAAahH,EAAsB,IAAlBuE,EAAKyC,WAC3BzC,EAAKyC,WAAalH,EAAsB,IAAlByE,EAAKyC,WACT,GAAlBzC,EAAKyC,WACL,EAAG,EAAM/G,KAAK6N,IAClBrJ,EAAIsJ,OAEJtJ,EAAIgC,UAAY,QAChBhC,EAAI+B,KAAO,mBACX/B,EAAIwC,SAAS,IAAK1C,EAAKyC,WAAahH,EAAsB,IAAlBuE,EAAKyC,WAC7CzC,EAAKyC,WAAalH,EAAsB,IAAlByE,EAAKyC,WAC/B,CAuGYiH,CAAkBhP,KAAMwF,EAAKxF,KAAKD,IAAIgB,EAAGf,KAAKD,IAAIc,GAC9C0F,GAAWC,GAnCpB,SAAiChB,EAAKzF,GACzCyF,EAAIgC,UAAY,eAChBhC,EAAI8C,SACAhD,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,WAAahI,EAAIc,EACJ,EAAlByE,EAAKyC,WACa,IAAlBzC,EAAKyC,YACTvC,EAAIoC,YAAc,iBAClBpC,EAAI+C,WACAjD,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,WAAahI,EAAIc,EACJ,EAAlByE,EAAKyC,WACa,IAAlBzC,EAAKyC,YACTvC,EAAIqC,UAAY,EAChBrC,EAAI+B,KAAO,mBACX/B,EAAIgC,UAAY,UAChBhC,EAAIwC,SAAS,WACT1C,EAAKyC,WAAahI,EAAIgB,EACtBuE,EAAKyC,YAAchI,EAAIc,EAAI,KACnC,CAiBgB6K,CAAwBlG,EAAKe,GAErC,EAEJvG,KAAKC,MAAM0G,QAEf,EAEA,QCzxBA,EAtBA,MACI9G,YAAYC,EAAMsB,EAAUM,GACxB1B,KAAKF,KAAOA,EACZE,KAAKiI,MAAQ,GACbjI,KAAKoB,SAAWA,EAChBpB,KAAK0B,IACT,CAEAuN,WAAW7C,GACP,IAAI8C,GAAQ,EACRlN,EAAI,EACR,MAAQkN,GAASlN,EAAIhC,KAAKiI,MAAMlF,QACxB/C,KAAKiI,MAAMjG,KAAKjC,IAAIwC,OAAO6J,EAAKrM,OAChCmP,GAAQ,GAKhB,OAFQlP,KAAKiI,MAAMkH,OAAOnN,EAAE,EAAG,GAExBhC,KAAKiI,KAChB,GCXJ,EANA,cAA0BmH,EACtBvP,YAAYC,GACRW,MAAMX,EACV,GCFJ+G,SAASmG,iBAAiB,oBAAoB,KAC1C,MAAM5G,EAASS,SAASwI,eAAe,iBACvCjJ,EAAOC,MAAQ0D,OAAOO,WACtBlE,EAAOE,OAASyD,OAAOM,YACvB,MAAM7E,EAAMY,EAAOkJ,WAAW,MACxB7J,EAAKoB,SAASC,cAAc,YAE5BvB,EAAO,ICHjB,MACI1F,cACIG,KAAK4D,MAAQ,IAAIjD,EACjBX,KAAK6D,KAAO,KACZ7D,KAAK2O,MAAQ,aACb3O,KAAKqB,OAAS,IAAIkO,EAAY5O,EAAAA,aAC9BX,KAAKwB,MAAQ,IAAI+N,EAAY5O,EAAAA,YAC7BX,KAAKmF,cAAgBnF,KAAKqB,OAC1BrB,KAAK0H,aAXE,EAYP1H,KAAKwF,IAAM,CAAC,CAChB,CAEA4I,UAAUvK,GACN7D,KAAK4D,MAAQ,IAAIjD,EACjBX,KAAK6D,KAAOA,EACZ7D,KAAK2O,MAAQ,aACb3O,KAAKqB,OAAS,IAAIkO,EAAY5O,EAAAA,aAC9BX,KAAKwB,MAAQ,IAAI+N,EAAY5O,EAAAA,YAC7BX,KAAKmF,cAAgBnF,KAAKqB,OAC1BrB,KAAK0H,aAtBE,EAuBP1H,KAAKwF,IAAM,CAAC,CAChB,CAEAgJ,gBACIxO,KAAK4D,MAAM/B,KAAKkF,SAASyI,IACrBA,EAAIzI,SAAS0I,IACTA,EAAI1I,SAASH,IACc,SAAnBA,EAAEzG,eACFyG,EAAEnD,UAAW,EACbmD,EAAElD,aAAc,EAChBkD,EAAEjD,aAAc,EACpB,GACF,GACJ,IAEN3D,KAAK0H,aAtCE,EAuCP1H,KAAK2O,MAAQ,aACb3O,KAAKmF,gBAAkBnF,KAAKqB,OAASrB,KAAKmF,cAAgBnF,KAAKwB,MAAQxB,KAAKmF,cAAgBnF,KAAKqB,MACrG,CAGAiN,eACI,IAAI1L,EAAS5C,KAAK4D,MAAM/B,KAAKQ,IAAIrC,KAAKwF,IAAIgB,YAE1C,OAAQxG,KAAK2O,OACT,IAAK,aAEG3O,KAAK0P,gBAAgB1P,KAAKwF,IAAI6I,SAAUzL,EAAOE,SAC/C9C,KAAKwF,IAAImK,eAAiB/M,EAC1B5C,KAAK2O,MAAQ,WAER3O,KAAK4P,aAAahN,EAAOE,SAC9B9C,KAAKwF,IAAImK,eAAiB/M,EAC1B5C,KAAK2O,MAAQ,QAER3O,KAAK0H,aAAe,GAAK1H,KAAKmF,cAAc8C,MAAMlF,OAzDzD,GA0DK/C,KAAK6P,gBAAgBjN,EAAOI,WAC/BhD,KAAKwF,IAAIyE,KAAOjK,KAAK6D,KAAK8H,qBAAqB/I,EAAOI,QAAQjD,KAC9DC,KAAKwF,IAAImK,eAAiB/M,EAC1B5C,KAAK2O,MAAQ,WAEjB,MACJ,IAAK,OAEG3O,KAAK8P,YAAY9P,KAAKwF,IAAIgB,WAAYxG,KAAKwF,IAAImK,iBAC/C3P,KAAKwF,IAAM,CAAC,EACZxF,KAAK2O,MAAQ,aAET3O,KAAK4D,MAAMtB,SACXtC,KAAK6D,KAAKgC,YACV7F,KAAK6D,KAAKyH,sBAEgB,IAAtBtL,KAAK0H,cAAsB1H,KAAKwO,gBACpCxO,KAAK6D,KAAKgC,eAId7F,KAAK6D,KAAKgC,YACN7F,KAAK0P,gBAAgB1P,KAAKwF,IAAI6I,SAAUzL,EAAOE,QAC/C9C,KAAK2O,MAAQ,UACN3O,KAAK4P,aAAahN,EAAOE,QAChC9C,KAAK2O,MAAQ,OACN3O,KAAK0H,aAAe,GAAK1H,KAAKmF,cAAc8C,MAAMlF,OApF/D,GAqFS/C,KAAK6P,gBAAgBjN,EAAOI,UAC/BhD,KAAKwF,IAAIyE,KAAOjK,KAAK6D,KAAK8H,qBAAqB/I,EAAOI,QAAQjD,KAC9DC,KAAK2O,MAAQ,WAEb3O,KAAK2O,MAAQ,aAEjB3O,KAAKwF,IAAImK,eAAiB/M,GAE9B5C,KAAK+P,qBACL,MACJ,IAAK,UAEG/P,KAAKgQ,WAAWhQ,KAAKwF,IAAI6I,SAAUrO,KAAKwF,IAAIyE,KAAMjK,KAAKwF,IAAImK,iBAC3D3P,KAAKwF,IAAM,CAAC,EACZxF,KAAK2O,MAAQ,aACa,IAAtB3O,KAAK0H,cAAsB1H,KAAKwO,gBACpCxO,KAAK6D,KAAKgC,cAGV7F,KAAK6D,KAAKgC,YACN7F,KAAK0P,gBAAgB1P,KAAKwF,IAAI6I,SAAUzL,EAAOE,QAC/C9C,KAAK2O,MAAQ,UACN3O,KAAK4P,aAAahN,EAAOE,QAChC9C,KAAK2O,MAAQ,OACN3O,KAAK0H,aAAe,GAAK1H,KAAKmF,cAAc8C,MAAMlF,OA7G/D,GA8GS/C,KAAK6P,gBAAgBjN,EAAOI,UAC/BhD,KAAKwF,IAAIyE,KAAOjK,KAAK6D,KAAK8H,qBAAqB/I,EAAOI,QAAQjD,KAC9DC,KAAK2O,MAAQ,WAEb3O,KAAK2O,MAAQ,aAEjB3O,KAAKwF,IAAImK,eAAiB/M,GAE9B5C,KAAK+P,qBACL,MACJ,IAAK,UAEG/P,KAAKiQ,aAAajQ,KAAKwF,IAAI6I,SAAUrO,KAAKwF,IAAImK,iBAC9C3P,KAAK2O,MAAQ,aACa,IAAtB3O,KAAK0H,cAAsB1H,KAAKwO,gBACpCxO,KAAK6D,KAAKgC,aAGV7F,KAAKkQ,cAActN,GAevB5C,KAAK+P,qBAKjB,CAEAG,gBACIlQ,KAAK6D,KAAKgC,YACN7F,KAAK0P,gBAAgB1P,KAAKwF,IAAI6I,SAAUzL,OAAOE,QAC/C9C,KAAK2O,MAAQ,UACN3O,KAAK4P,aAAahN,OAAOE,QAChC9C,KAAK2O,MAAQ,OACN3O,KAAK0H,aAAe,GAAK1H,KAAKmF,cAAc8C,MAAMlF,OA5JnD,GA6JH/C,KAAK6P,gBAAgBjN,OAAOI,UAC/BhD,KAAKwF,IAAIyE,KAAOjK,KAAK6D,KAAK8H,qBAAqB/I,OAAOI,QAAQjD,KAC9DC,KAAK2O,MAAQ,WAEb3O,KAAK2O,MAAQ,aAEjB3O,KAAKwF,IAAImK,eAAiB/M,MAC9B,CAEAmN,qBACI,IAAK/P,KAAKmQ,kBAAoBnQ,KAAK0H,aAxK5B,EAwKmD,CACtD,MAAM3B,EAAc/F,KAAK6D,KAAKkC,YAAYe,cAAc,gBAClDoE,EAASnF,EAAYe,cAAc,gBAEzCf,EAAYoD,UAAYnJ,KAAK6D,KAAKiH,uBAClC/E,EAAYwD,YAAY2B,GAExBlL,KAAK6D,KAAKkC,YAAYiB,MAAMC,WAAa,SAC7C,CACJ,CAEAkJ,iBACI,IAAIC,GAAO,EAUX,OATApQ,KAAKmF,cAAc8C,MAAMlB,SAAQqF,IAC7BgE,KAAUhE,EAAK3I,SACV2I,EAAK1I,aACN0I,EAAKnH,aAETmL,KAAUhE,EAAKzI,aAAeyI,EAAK5I,QAAQT,OAAS,EACpDqN,IAASpQ,KAAK0H,aAAe,GAAK0E,EAAKlH,aAAalF,KAAKmF,eACzDiL,IAASpQ,KAAK0H,aAAe,GAAK1H,KAAKqQ,eAAe,IAEnDD,CACX,CAEAC,gBACI,IAAIzO,EAEAA,EADA5B,KAAKmF,gBAAkBnF,KAAKqB,OACjBrB,KAAK4D,MAAMhC,SAASP,OAEpBrB,KAAK4D,MAAMhC,SAASJ,MAGnC,IAAI8O,GAAM,EASV,OARA1O,EAASmF,SAAQwJ,IACb,IAAIH,GAAO,EACWpQ,KAAK4D,MAAM/B,KAAKQ,IAAIkO,EAAExQ,KAC9BgH,SAAQqF,IACQ,SAAtBA,EAAKjM,eAAyBiQ,GAAO,EAAK,IAElDE,IAAQF,CAAI,IAETE,CACX,CAEAZ,gBAAgB3P,EAAKqM,GACjB,IAAIsD,GAAkB,EAMtB,OALI1P,KAAK0H,aAAe,GAAK0E,GAA8B,SAAtBA,EAAKjM,cACtCiM,EAAKlH,aAAalF,KAAKmF,gBTzM5B,SAAyBqL,EAAWC,GACvC,IAAI1P,EAAI0P,EAAS1P,EAAIyP,EAAUzP,EAC3BF,EAAI4P,EAAS5P,EAAI2P,EAAU3P,EAE/B,OAAOE,EAAI,GAAKA,EAAI,KAAQF,EAAI,GAAKA,EAAI,GAC7C,CSoMqD6P,CAAgBtE,EAAKrM,IAAKA,KAC/D2P,GAAkB,EAClB1P,KAAK6D,KAAKgC,UAAUuG,EAAKrM,IAAKA,IAE/B2P,CACX,CAEAO,aAAalQ,EAAK6C,GACd,IAAIqN,GAAe,EACf7D,EAAOxJ,EAAOE,OAOlB,OANIsJ,GAA8B,SAAtBA,EAAKjM,cACbiM,EAAKlH,aAAalF,KAAKmF,gBT7M5B,SAA+BqL,EAAWC,GAC7C,IAAI1P,EAAI0P,EAAS1P,EAAIyP,EAAUzP,EAC3BF,EAAI4P,EAAS5P,EAAI2P,EAAU3P,EAC/B,OAAOE,EAAI,GAAKA,EAAI,GAAKF,EAAI,GAAKA,EAAI,GAC1C,CSyMqD8P,CAAsBvE,EAAKrM,IAAKA,KACrEqM,EAAKrI,WACL/D,KAAK0H,cAAgB,EACrBuI,GAAe,GAEhBA,CACX,CAEAL,aAAaxD,GACT,IAAIwD,GAAe,EASnB,OARIxD,GAA8B,SAAtBA,EAAKjM,cAA2BiM,EAAKtM,OAASE,KAAKmF,cAAcrF,OACzEsM,EAAKtI,eACAsI,EAAKxI,QAASwI,EAAKxI,MAAQ5D,KAAK4D,OAChCwI,EAAKvI,OAAQuI,EAAKvI,KAAO7D,KAAK6D,MAEnC7D,KAAK4Q,qBAAqBxE,EAAMpM,KAAK6D,MACrC+L,GAAe,GAEZA,CACX,CAEAgB,qBAAqBxE,EAAMvI,GAClBuI,EAAK3I,UACN2I,EAAKlI,WAAW6C,SAAShH,IACrB8D,EAAK0I,mBAAmBxM,GACxB8D,EAAKuD,cAAcrH,EAAI,IAI1BqM,EAAK1I,aAAgB0I,EAAKzI,aAC3ByI,EAAKnH,aAAa8B,SAAShH,IACvB8D,EAAK2I,qBAAqBzM,GAC1B8D,EAAKuD,cAAcrH,EAAI,IAG/B8D,EAAKyI,YAAYF,EAAKrM,IAC1B,CAEA8P,gBAAgB1N,GACZ,OAAOA,GAA8B,YAAnBA,EAAQ5B,QAAwB4B,EAAQrC,OAASE,KAAKmF,cAAcrF,IAC1F,CAEAkQ,WAAWjQ,EAAKkK,EAAMrH,GAClB,IAEIwJ,EAFA4D,GAAa,EACbnL,EAAS7E,KAAK4L,mBAAmBhJ,EAAOI,QAASjD,GAUrD,OARIqM,EAAOnC,EAAK4G,MAAKjK,GAAKA,EAAE7G,IAAIgB,IAAM8D,EAAO9D,GAAK6F,EAAE7G,IAAIc,IAAMgE,EAAOhE,OACjEuL,EAAKrM,IAAM6C,EAAOI,QAAQjD,IAC1B6C,EAAOX,KAAKmK,GACZpM,KAAKmF,cAAc8C,MAAMhG,KAAKmK,GAC9BpM,KAAK0H,cAAgB,EACrBsI,GAAa,GAGVA,CACX,CAEApE,mBAAmBzJ,EAASpC,GACxB,IAAI+Q,EAAgC,IAAlB3O,EAAQpC,IAAIgB,GAAW,IAAO,IAC5CgQ,EAAgC,IAAlB5O,EAAQpC,IAAIc,GAAW,EAAI,GACzCE,EAAIC,KAAKC,MAAOlB,EAAIgB,EAAI+P,GACxBjQ,EAAIG,KAAKC,MAAOlB,EAAIc,EAAIkQ,GACxBlM,EAAS,CAAC,EAGd,OAFAA,EAAO9D,EAAsB,IAAlBoB,EAAQpC,IAAIgB,EAAUA,EAAI,IAAOA,EAAI,IAChD8D,EAAOhE,EAAsB,IAAlBsB,EAAQpC,IAAIc,EAAUA,EAAI,EAAIA,EAAI,GACtCgE,CACX,CAEAiL,YAAY/P,EAAK6C,GACb,OAAO5C,KAAKgR,SAASjR,EAAK6C,IAAW5C,KAAKiR,WAAWlR,EAAK6C,EAC9D,CAEAoO,SAASjR,EAAK6C,GACV,IAAIsO,GAAY,EACZ9E,EAAOxJ,EAAOE,OAElB,GAAIsJ,EAAK7I,OAAS6I,EAAK7I,MAAMsN,MAAKjK,GAAKA,EAAE7F,IAAMhB,EAAIgB,GAAK6F,EAAE/F,IAAMd,EAAIc,IAAI,CACpEuL,EAAKrM,IAAMA,EACPqM,EAAKhH,cACLgH,EAAKpI,YAETpB,EAAOuO,MACP,IAAIC,EAAcpR,KAAKqR,eAAezO,GAClB,OAAhBwO,IACAxO,EAAOwO,GAAarR,IAAMA,EAC1BC,KAAK4D,MAAM/B,KAAKQ,IAAItC,GAAKkC,KAAKW,EAAOwO,IACrCxO,EAAOuM,OAAOiC,EAAa,IAE/BpR,KAAK4D,MAAM/B,KAAKQ,IAAItC,GAAKkC,KAAKmK,GAE9BpM,KAAK0H,eACL0E,EAAK3I,UAAW,EAChByN,GAAY,CAChB,CACA,OAAOA,CACX,CAEAG,eAAezO,GACX,IAAK,IAAIZ,EAAE,EAAGA,EAAEY,EAAOG,OAAQf,IAC3B,GAAIY,EAAOZ,GAAGlC,OAASE,KAAKmF,cAAcrF,MACd,aAArB8C,EAAOZ,GAAGzB,OACb,OAAOyB,EAGf,OAAO,IACX,CAEAiP,WAAWlR,EAAK6C,GACZ,IAAI0O,GAAe,EACflF,EAAOxJ,EAAOE,OAClB,GAAIsJ,EAAK5I,SAAW4I,EAAK5I,QAAQqN,MAAKjK,GAAKA,EAAE7F,IAAMhB,EAAIgB,GAAK6F,EAAE/F,IAAMd,EAAIc,IAAI,CACxE,IAAI0Q,EAAiBvR,KAAK4D,MAAM/B,KAAKQ,IAAItC,GACrCyR,EAAeD,EAAezO,OAClC0O,EAAatO,SAAWkJ,EAAKnJ,OACzBuO,EAAatO,QAAU,IACvBqO,EAAeJ,MACfnR,KAAKmF,cAAcrF,OAASE,KAAKqB,OAAOvB,KAAOE,KAAKwB,MAAMyN,WAAWuC,GAAgBxR,KAAKqB,OAAO4N,WAAWuC,IAEhHxR,KAAK0H,eACL0E,EAAK1I,aAAc,EACnB4N,GAAe,CACnB,CACA,OAAOA,CACX,GDvVMzN,EAAO,IAAIyB,EAAKC,EAAMC,EAAKC,GACjCF,EAAK1B,KAAOA,EAEZA,EAAKkJ,WAAWvH,EAAI,G","sources":["webpack://javascript-project/./src/piece.js","webpack://javascript-project/./src/pieces/barrack.js","webpack://javascript-project/./src/pieces/base.js","webpack://javascript-project/./src/pieces/treasure.js","webpack://javascript-project/./src/board.js","webpack://javascript-project/./src/utils.js","webpack://javascript-project/./src/pieces/unit.js","webpack://javascript-project/./src/pieces/units/archer.js","webpack://javascript-project/./src/pieces/units/defender.js","webpack://javascript-project/./src/pieces/units/infantry.js","webpack://javascript-project/./src/view.js","webpack://javascript-project/./src/player.js","webpack://javascript-project/./src/humanPlayer.js","webpack://javascript-project/./src/index.js","webpack://javascript-project/./src/game.js"],"sourcesContent":["class Piece {\n    constructor(team, pos, ) {\n        this.team = team;\n        this.pos = pos\n        this.image = new Image();\n    }\n\n    parentType() {\n        return Object.getPrototypeOf(this.constructor).name;\n    }\n\n    type() {\n        return this.constructor.name;\n    }\n}\n\nexport default Piece;","import Piece from \"../piece\";\n\nclass Barrack extends Piece {\n    constructor(team, pos) {\n        super(team, pos);\n        this.image.src = \"./resources/barracks2.png\";\n    }\n}\n\nexport default Barrack;","import Piece from \"../piece\";\n\nclass Base extends Piece {\n    constructor(team, pos) {\n        super(team, pos);\n    }\n}\n\nexport default Base;","import Piece from \"../piece\";\nimport Board from \"../board\";\n\nclass Treasure extends Piece {\n    constructor(team, pos) {\n        super(team, pos);\n        this.team === Board.PLAYER_TEAM ? this.image.src = \"./resources/treasureblue.png\" : this.image.src = \"./resources/treasurered.png\";\n    }\n}\n\nexport default Treasure;","import Barrack from \"./pieces/barrack\";\nimport Base from \"./pieces/base\";\nimport Treasure from \"./pieces/treasure\";\n\nclass Board {\n    static GRID_WIDTH = 7;\n    static GRID_HEIGHT = 8; //0, 0 is top left corner\n    static PLAYER_TEAM = 1;\n    static ENEMY_TEAM = 2;\n\n    constructor() {\n        let pos1 = {y: Board.GRID_HEIGHT-1, x: Math.floor(Board.GRID_WIDTH/2)}\n        let pos2 = {y: 0, x: Math.floor(Board.GRID_WIDTH/2)}\n        this.treasure = {\n            player: new Treasure(Board.PLAYER_TEAM, pos1),\n            enemy: new Treasure(Board.ENEMY_TEAM, pos2)};\n\n        pos1 = {y: 0, x: Math.floor(Board.GRID_WIDTH/2)};\n        pos2 = {y: Board.GRID_HEIGHT-1, x: Math.floor(Board.GRID_WIDTH/2)}\n        this.base = {\n            player: new Base(Board.PLAYER_TEAM, pos2),\n            enemy: new Base(Board.ENEMY_TEAM, pos1)};\n        this.barracks = {\n            player: [],\n            enemy: []\n        };\n        this.grid = Board.makeGrid(this.treasure, this.base, this.barracks);\n    }\n\n    static makeGrid(treasure, base, barracks) {\n        let grid = [];\n\n        for (let i=0; i < Board.GRID_HEIGHT; i++) {\n            grid.push([]);\n            for (let j=0; j < Board.GRID_WIDTH; j++) {\n                grid[i].push([]);\n            }\n        }\n\n        let pos = {y: 0, x: 0};\n        let barrack = new Barrack(Board.ENEMY_TEAM, pos);\n        grid.get(pos).push(barrack);\n        barracks.enemy.push(barrack);\n\n        pos = {y: 0, x: Board.GRID_WIDTH-1};\n        barrack = new Barrack(Board.ENEMY_TEAM, pos);\n        grid.get(pos).push(barrack);\n        barracks.enemy.push(barrack);\n\n        pos = {y: Board.GRID_HEIGHT-1, x: 0};\n        barrack = new Barrack(Board.PLAYER_TEAM, pos);\n        grid.get(pos).push(barrack);\n        barracks.player.push(barrack);\n\n        pos = {y: Board.GRID_HEIGHT-1, x: Board.GRID_WIDTH-1};\n        barrack = new Barrack(Board.PLAYER_TEAM, pos);\n        grid.get(pos).push(barrack);\n        barracks.player.push(barrack);\n\n        grid.get(base.enemy.pos).push(base.enemy);\n        grid.get(base.player.pos).push(base.player);\n\n        grid.get(treasure.enemy.pos).push(treasure.enemy);\n        grid.get(treasure.player.pos).push(treasure.player);\n\n        return grid;\n    }\n\n    isWon() {\n        return this.treasure.player.pos.equals(this.base.enemy.pos) ||\n            this.treasure.enemy.pos.equals(this.base.player.pos);\n    }\n}\n\nexport default Board;","import Board from \"./board\";\n\nexport function isOnBoard(pos) {\n    return pos.x > -1 && pos.x < Board.GRID_WIDTH && pos.y > -1 && pos.y < Board.GRID_HEIGHT;\n}\n\nexport function isButton(pos) {\n    return pos.y > Board.GRID_HEIGHT + 0.25 &&\n        pos.y < Board.GRID_HEIGHT + 0.75 &&\n        pos.x > 4 && pos.x < 5;\n}\n\nexport function willPlayAgain(pos) {\n     return pos.x > Board.GRID_WIDTH / 2 - 0.75 &&\n        pos.x < Board.GRID_WIDTH / 2 + 0.75 &&\n        pos.y > Math.floor((Board.GRID_HEIGHT) / 2) &&\n        pos.y < Math.floor((Board.GRID_HEIGHT) / 2) + 0.5;\n}\n\nexport function isUpgradeButton(squarePos, clickPos) {\n    let x = clickPos.x - squarePos.x;\n    let y = clickPos.y - squarePos.y;\n\n    return x > 0 && x < 0.25 && y > 0 && y < 0.25;\n}\n\nexport function isUpgradeConfirmation(squarePos, clickPos) {\n    let x = clickPos.x - squarePos.x;\n    let y = clickPos.y - squarePos.y;\n    return x > 0 && x < 1 && y > 0 && y < 0.25;\n}\n\nArray.prototype.get = function(pos) {\n    return this[pos.y][pos.x];\n}\n\nArray.prototype.containsType = function(type) {\n    square.some()\n}\n\nArray.prototype.last = function() {\n    return this[this.length - 1];\n}\n\nArray.prototype.first = function() {\n    return this[0];\n}\n\nObject.prototype.equals = function(pos) {\n    return this.x === pos.x && this.y === pos.y;\n}\n\nexport default Array;","import Board from \"../board\";\nimport Piece from \"../piece\";\nimport {isOnBoard} from \"../utils\";\n\nclass Unit extends Piece {\n    constructor(team, pos) {\n        super(team, pos);\n        this.attack = null;\n        this.defense = null;\n        this.pointStandard = null;\n        this.upgrade = null;\n        this.level = 1;\n        this.attackDist = 1;\n        this.moves = null;\n        this.attacks = [];\n        this.hasMoved = false;\n        this.hasAttacked = false;\n        this.hasUpgraded = false;\n        this.board = null;\n        this.view = null;\n    }\n\n    resetActions() {\n        this.moves = null;\n        this.attacks = [];\n    }\n\n    upgrades() {\n        this.level = 2;\n        this.hasUpgraded = true;\n        this.attack = this.upgrade.attack;\n        this.defense = this.upgrade.defense;\n    }\n\n    downgrade() {\n        this.level = 1;\n        this.attack = this.pointStandard.attack;\n        this.defense = Math.min(this.pointStandard.defense, this.defense);\n    }\n\n    getMoves() {\n        this.moves = this.getMovesSet();\n        this.moves.delete(JSON.stringify(this.pos));\n        this.moves = [...this.moves].map(elem => {\n            return JSON.parse(elem);\n        });\n        return this.moves;\n    }\n\n    getMovesSet(validVisited = new Set(), maxDist = 2, pos = this.pos) {\n        if (maxDist === 0) { return validVisited; }\n\n        for (let y=pos.y-1; y <= pos.y + 1; y++) {\n            for (let x=pos.x-1; x <= pos.x + 1; x++) {\n                let newPos = {y: y, x: x};\n                if (isOnBoard(newPos) && !this.hasUnit(newPos)) {\n                    if (!validVisited.has(JSON.stringify(newPos))) {\n                        validVisited.add(JSON.stringify(newPos));\n                    }\n                    validVisited = this.getMovesSet(validVisited, maxDist-1, newPos);\n                }\n            }\n        }\n\n        return validVisited;\n    }\n\n    getAttacks() {\n        for (let y=this.pos.y-this.attackDist; y <= this.pos.y + this.attackDist; y++) {\n            for (let x=this.pos.x-this.attackDist; x <= this.pos.x + this.attackDist; x++) {\n                let newPos = {y: y, x: x};\n                if (isOnBoard(newPos)) {\n                    let square = this.board.grid.get(newPos);\n                    if (this.hasUnit(newPos) && square.last().team !== this.team) {\n                        this.attacks.push(newPos);\n                    }\n                }\n            }\n        }\n        return this.attacks;\n    }\n\n    hasUnit(pos) {\n        let square = this.board.grid.get(pos);\n        if (square.length > 0) {\n            let elemType = square.last().parentType();\n            if (elemType === 'Unit') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    isUpgradable(currentPlayer) {\n        return this.team === currentPlayer.team &&\n            this.level == 1 &&\n            ((this.team === Board.PLAYER_TEAM && this.pos.y < Board.GRID_HEIGHT / 2) ||\n            (this.team === Board.ENEMY_TEAM && this.pos.y >= Board.GRID_HEIGHT / 2));\n    }\n\n    onHomeTerf() {\n        return (this.team === Board.PLAYER_TEAM && this.pos.y >= Board.GRID_HEIGHT / 2) ||\n            (this.team === Board.ENEMY_TEAM && this.pos.y < Board.GRID_HEIGHT / 2);\n    }\n}\n\nexport default Unit;","import Unit from \"../unit\";\n\nclass Archer extends Unit {\n    constructor(team, pos) {\n        super(team, pos);\n        this.attack = 1;\n        this.defense = 1;\n        this.attackDist = 2;\n        this.upgrade = {attack: 2, defense: 2}\n        this.pointStandard = {attack: 1, defense: 1}\n        this.image.src = \"./resources/archer.png\";\n    }\n}\n\nexport default Archer;","import Unit from \"../unit\";\n\nclass Defender extends Unit {\n    constructor(team, pos) {\n        super(team, pos);\n        this.attack = 1;\n        this.defense = 3;\n        //if attack is changed to 1, unit.isUpgradable returns true when unit is already upgraded\n        //because it checks if upgraded using attack points. Need to implement different check\n        //if making upgraded attack points equal to standard attack points\n        this.upgrade = {attack: 1, defense: 5}\n        this.pointStandard = {attack: 1, defense: 3}\n        this.image.src = \"./resources/defender.png\";\n    }\n}\n\nexport default Defender;","import Unit from \"../unit\";\n\nclass Infantry extends Unit {\n    constructor(team, pos) {\n        super(team, pos);\n        this.attack = 2;\n        this.defense = 2;\n        this.upgrade = {attack: 4, defense: 3}\n        this.pointStandard = {attack: 2, defense: 2}\n        this.image.src = \"./resources/infantry.png\";\n    }\n}\n\nexport default Infantry;","import Board from \"./board\";\nimport Barrack from \"./pieces/barrack\";\nimport Base from \"./pieces/base\";\nimport Treasure from \"./pieces/treasure\";\nimport Unit from \"./pieces/unit\";\nimport Archer from \"./pieces/units/archer\";\nimport Defender from \"./pieces/units/defender\";\nimport Infantry from \"./pieces/units/infantry\";\nimport { isOnBoard, isButton, willPlayAgain } from \"./utils\";\n\nclass View {\n    static SQUARE_DIM = 100;\n\n    constructor(game, ctx, el) {\n        this.game = game;\n        this.el = el;\n        this.ctx = ctx;\n        this.ratio = null;\n        this.images = this.renderImg();\n        this.drawBoard();\n        this.drawMenu({y: Board.GRID_HEIGHT, x: Board.GRID_WIDTH});\n        this.noMoreMoves = this.drawNoMoreMovesModule();\n    }\n\n    resetView(game) {\n        this.game = game;\n        this.ratio = null;\n        this.drawBoard();\n    }\n\n    clearBoard() {\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    }\n\n    drawBoard(unitPos, clickedPos) {\n        this.clearBoard();\n        this.invisifyButtons();\n\n        this.images.background.onload(unitPos, clickedPos);\n    }\n\n    invisifyButtons() {\n        const e = [];\n        e.push(document.querySelector(\".about\"));\n        e.push(document.querySelector(\".rules\"));\n        e.push(document.querySelector(\".abouttitle\"));\n        e.push(document.querySelector(\".rulestitle\"));\n\n        e.forEach(e => {if (e) {e.style.visibility = 'hidden'}});\n    }\n\n    drawBoardWithoutOnload(unitPos, clickedPos) {\n        for (let y=0; y < Board.GRID_HEIGHT; y++) {\n            for (let x=0; x < Board.GRID_WIDTH; x++) {\n                this.drawGridSquare(x, y, \"darkgreen\");\n                this.drawGridElems({y: y, x: x}, unitPos, clickedPos);\n            }\n        }\n        this.drawMidline();\n\n        this.drawEndTurnButton();\n\n        this.ctx.font = \"40px Copperplate\";\n        this.game.currentPlayer.team === Board.ENEMY_TEAM ? this.ctx.fillStyle = \"red\" : this.ctx.fillStyle = \"blue\";\n        let str = \"Action Points: \" + this.game.actionPoints.toString();\n        this.ctx.strokeStyle = 'dimgrey';\n        this.ctx.lineWidth = 3;\n        this.ctx.strokeText(str, 10, (Board.GRID_HEIGHT+0.5) * View.SQUARE_DIM);\n        this.ctx.fillText(str, 10, (Board.GRID_HEIGHT+0.5) * View.SQUARE_DIM);\n\n        this.ctx.font = \"30px Copperplate\";\n        str = \"Troops: \" + this.game.currentPlayer.units.length.toString() + \"/8\";\n        this.ctx.strokeText(str, 10, (Board.GRID_HEIGHT+0.75) * View.SQUARE_DIM);\n        this.ctx.fillText(str, 10, (Board.GRID_HEIGHT+0.75) * View.SQUARE_DIM);\n    }\n\n    drawMidline() {\n        this.ctx.strokeStyle = 'lightskyblue';    \n        this.ctx.beginPath();\n        this.ctx.moveTo(0, Board.GRID_HEIGHT / 2 * View.SQUARE_DIM);\n        this.ctx.lineTo((Board.GRID_HEIGHT-1) * View.SQUARE_DIM, Board.GRID_HEIGHT / 2 * View.SQUARE_DIM);\n        this.ctx.stroke();\n    }\n\n    drawEndTurnButton() {\n        this.ctx.fillStyle = 'lightskyblue';        \n        this.ctx.fillRect(\n            View.SQUARE_DIM * 4,\n            (Board.GRID_HEIGHT+0.25) * View.SQUARE_DIM,\n            View.SQUARE_DIM * 1,\n            View.SQUARE_DIM * 0.5);\n        this.ctx.strokeStyle = 'cornflowerblue';\n        this.ctx.lineWidth = 1;\n        this.ctx.strokeRect(\n            View.SQUARE_DIM * 4,\n            (Board.GRID_HEIGHT+0.25) * View.SQUARE_DIM,\n            View.SQUARE_DIM * 1,\n            View.SQUARE_DIM * 0.5);\n        this.ctx.font = \"25px Copperplate\";\n        this.ctx.fillStyle = \"dimgrey\";\n        this.ctx.lineWidth = 2;\n        this.ctx.fillText(\"End\", 4.25 * View.SQUARE_DIM, (Board.GRID_HEIGHT+0.45) * View.SQUARE_DIM);\n        this.ctx.fillText(\"Turn\", 4.15 * View.SQUARE_DIM, (Board.GRID_HEIGHT+0.65) * View.SQUARE_DIM);\n    }\n\n    drawMenu(pos) {\n        const grid = document.createElement(\"ul\");\n        grid.classList.add(\"grid\");\n\n        grid.style.position = \"absolute\";\n        grid.style.right = \"7.5%\";\n        grid.style.bottom = \"calc(0.2% - 32px)\";\n        grid.style.width = \"calc(14.29% - 40px)\";\n        grid.style.height = \"5.85%\";\n\n        const cell = document.createElement(\"li\");\n        cell.classList.add(\"menu\")\n        cell.style.backgroundColor = \"lightskyblue\";\n        cell.style.border = \"1px solid cornflowerblue\";\n        cell.style.height = \"calc(100% - 2px)\";\n        cell.style.width = \"calc(100% - 2px)\";\n        cell.style.left = \"0px\";\n\n        cell.style.listStyle = \"none\";\n        cell.style.cursor = \"pointer\";\n        cell.innerHTML = \"Menu\"\n        cell.style.font = (25*this.ratio) + \"px Copperplate\"\n\n        cell.style.color = \"dimgrey\"\n        cell.style.textAlign = \"center\"\n        cell.style.lineHeight = \"200%\"\n        cell.classList.add(\"button\");\n\n        grid.appendChild(cell);\n        // this.el.appendChild(grid);\n        document.getElementsByClassName(\"background\")[0].appendChild(grid)\n\n        this.drawMenuOptions(pos, cell);\n        const ruleBox = this.drawRules(pos);\n        const aboutBox = this.drawAbout(pos);\n\n        const windowResize = window.onresize;\n        window.onresize = () => {\n            windowResize();\n\n            if (this.ratio < 0.67) {\n                this.ratio = 0.67;\n            }\n            ruleBox.style.font = (19*this.ratio - 2) + \"px Copperplate\"\n            ruleBox.style.lineHeight = \"100%\"\n            aboutBox.style.font = (20*this.ratio - 2) + \"px Copperplate\"\n            aboutBox.style.lineHeight = \"350%\"\n        }\n    }\n\n    drawMenuOptions(pos, cell) {\n        const menu = document.createElement(\"ul\");\n        menu.classList.add(\"menu\");\n\n        menu.style.position = \"absolute\";\n        menu.style.right = \"7.5%\";\n        menu.style.bottom = \"calc(5.85% - 16px)\";\n        menu.style.width = \"calc(14.29% - 42px)\";\n        menu.style.height = \"calc(5.85% - 2px)\";\n    \n        const rules = document.createElement(\"li\");\n        this.drawButton(\"Rules\", rules, {x: \"0%\", y: \"100%\"});\n        rules.classList.add(\"rules\");\n        const about = document.createElement(\"li\");\n        this.drawButton(\"About\", about, {x: \"0%\", y: \"0%\"});\n        about.classList.add(\"about\");\n\n        rules.style.font = 20*this.ratio + \"px Copperplate\";\n        rules.style.lineHeight = \"250%\"\n        about.style.font = 20*this.ratio + \"px Copperplate\";\n        about.style.lineHeight = \"250%\"\n\n        menu.appendChild(rules);\n        menu.appendChild(about);\n        menu.style.visibility = 'hidden'\n\n        window.onresize = () => {\n            this.ratio = Math.min(\n                window.innerHeight / this.ctx.canvas.height,\n                window.innerWidth / this.ctx.canvas.width\n            )\n            if (this.ratio < 0.67) {\n                this.ratio = 0.67;\n            }\n            cell.style.font = (25*this.ratio) + \"px Copperplate\"\n            cell.style.lineHeight = \"200%\"\n\n            rules.style.font = (20*this.ratio) + \"px Copperplate\"\n            rules.style.lineHeight = \"250%\"\n            about.style.font = (20*this.ratio) + \"px Copperplate\"\n            about.style.lineHeight = \"250%\"\n        }\n\n        // this.el.appendChild(menu);\n        document.getElementsByClassName(\"background\")[0].appendChild(menu)\n    }\n\n    drawRules(pos) {\n        const title = document.createElement(\"ul\");\n        title.classList.add(\"rulestitle\");\n        this.drawMenuDisplayBox(\"How To Play&nbsp;&nbsp;&nbsp;\", title, title);\n    \n        const rules = document.createElement(\"li\");\n        this.drawMenuInnerDisplayBox(\"Steal the enemy's treasure & bring it back to your base!<p>BUYING | Select the barracks to buy troops. All units can move up to 2 spaces in any direction. There are 3 types of troops:</p>-Infantry: Defense 2, Attack 1, Range 1<br>-Archer: Defense 1, Attack 1, Range 2<br>-Defender: Defense 3, Attack 1, Range 1<br><p>UPGRADING | When in enemy territory, units can be ugraded as follows:</p>-Infantry: Defense +1, Attack +2<br>-Archer: Defense +1, Attack +1<br>-Defender: Defense +2, Attack +1<br><p>Units cannot attack after upgrading until the next round. Stats return to normal once returning to friendly territory.</p><p>TREASURE | Pick up the treasure by moving a unit onto the square containing it. (You can only pick up enemy treasure.)</p><p>PRICE CHART<br>Moving or Attacking: 1 Action Point<br>Buying or Upgrading: 2 Action Points</p>\",\n        rules, title);\n        rules.style.font = \"12px Copperplate\";\n        if (this.ratio < 0.67) {\n            this.ratio = 0.67;\n        }\n        rules.style.font = (19*this.ratio - 2) + \"px Copperplate\"\n        rules.style.lineHeight = \"100%\";\n        rules.classList.add(\"rulesbox\");\n\n        title.appendChild(rules);\n        // title.style.visibility = 'hidden'\n        // this.el.appendChild(title);\n        document.getElementsByClassName(\"background\")[0].appendChild(title)\n        return rules;\n    }\n\n    drawAbout(pos) {\n        const title = document.createElement(\"ul\");\n        title.classList.add(\"abouttitle\");\n\n        this.drawMenuDisplayBox(\"About&nbsp;&nbsp;&nbsp;\", title, title);\n    \n        const about = document.createElement(\"li\");\n        this.drawMenuInnerDisplayBox(\"<br><br><p>Game developed by <a href='https://www.linkedin.com/in/jdirksen/'>Jasmine Kobata</a></p><p><a href='https://github.com/JasmineKobata/Javascript-Project'>Treasure Wars! GitHub Repo</p><p><a href='https://www.appacademy.io/'>App Academy</a> Javascript Project</p>\", about, title);\n        if (this.ratio < 0.67) {\n            this.ratio = 0.67;\n        }\n        about.style.font = (20*this.ratio - 2) + \"px Copperplate\";\n        about.style.lineHeight = \"350%\"\n        about.classList.add(\"aboutbox\");\n\n        title.appendChild(about);\n        title.style.visibility = 'hidden'\n        // this.el.appendChild(title);\n        document.getElementsByClassName(\"background\")[0].appendChild(title)\n        return about;\n    }\n\n    drawMenuDisplayBox(str, box, title) {\n        box.style.width = \"calc(75% - 42px)\"\n        box.style.height = \"calc(75% - 2px)\"\n        box.style.backgroundColor = \"lightskyblue\";\n        box.style.border = \"1px solid cornflowerblue\";\n        box.style.position = \"absolute\";\n        box.style.left = \"50%\";\n        box.style.top = \"45%\";\n        box.style.transform = \"translate(-50%, -50%)\";\n        box.style.margin = \"0px\"\n        box.style.listStyle = \"none\";\n        box.style.cursor = \"pointer\";\n        box.innerHTML = str;\n        if (this.ratio < 0.67) {\n            this.ratio = 0.67;\n        }\n        box.style.font = (30*this.ratio - 2) + \"px Copperplate\"\n        box.style.color = \"dimgrey\"\n        box.style.textAlign = \"center\"\n        box.style.lineHeight = \"250%\";\n\n        const windowResize = window.onresize;\n        window.onresize = () => {\n            windowResize();\n\n            if (this.ratio < 0.67) {\n                this.ratio = 0.67;\n            }\n            box.style.font = (30*this.ratio - 2) + \"px Copperplate\"\n            box.style.lineHeight = \"250%\";\n        }\n    }\n\n    drawMenuInnerDisplayBox(str, box, title) {\n        box.style.width = \"calc(80% - 42px)\"\n        box.style.height = \"calc(80% - 2px)\"\n        box.style.backgroundColor = \"cornflowerblue\";\n        box.style.border = \"1px solid cornflowerblue\";\n        box.style.position = \"absolute\";\n        box.style.left = \"50%\";\n        box.style.top = \"50%\";\n        box.style.transform = \"translate(-50%, -50%)\";\n        // box.style.margin = \"0px\";\n        box.style.listStyle = \"none\";\n        box.style.cursor = \"pointer\";\n        box.innerHTML = str;\n        box.style.font = \"25px Copperplate\"\n        box.style.color = \"white\"\n    }\n\n    drawButton(str, cell, pos) {\n        cell.style.backgroundColor = \"lightskyblue\";\n        cell.style.border = \"1px solid cornflowerblue\";\n        cell.style.width = \"100%\";\n        cell.style.height = \"100%\";\n        cell.style.position = \"absolute\";\n        cell.style.right = pos.x;\n        cell.style.bottom = pos.y;\n        cell.style.margin = \"0px\"\n        cell.style.listStyle = \"none\";\n        cell.style.cursor = \"pointer\";\n        cell.innerHTML = str\n        cell.style.color = \"dimgrey\"\n        cell.style.textAlign = \"center\"\n    }\n\n    updateNoMoreMovesStr() {\n        let str = \"<br>No Moves Left!</br>\";\n        str += this.game.currentPlayer.team === Board.PLAYER_TEAM ? \"Red\" : \"Blue\";\n        str += \"'s Turn?\"\n        return str;\n    }\n\n    drawNoMoreMovesModule() {\n        const background = document.createElement(\"div\");\n        background.classList.add(\"movesBackground\")\n        background.style.width = \"100%\";\n        background.style.height = \"100%\";\n        background.style.position = \"absolute\";\n        background.style.top = \"0px\";\n        background.style.visibility = \"hidden\";\n\n        const module = document.createElement(\"ul\");\n        module.classList.add(\"noMoreMoves\");\n\n        module.style.width = \"calc(40% - 42px)\"\n        module.style.height = \"calc(18% - 2px)\"\n        module.style.backgroundColor = \"lightskyblue\";\n        module.style.border = \"1px solid cornflowerblue\";\n        module.style.position = \"absolute\";\n        module.style.left = \"50%\";\n        module.style.top = \"45%\";\n        module.style.transform = \"translate(-50%, -50%)\";\n        module.style.margin = \"0px\"\n        module.style.paddingLeft = \"10px\";\n        module.style.paddingRight = module.style.paddingLeft;\n        module.style.listStyle = \"none\";\n        module.style.cursor = \"pointer\";\n        module.style.font = (27*this.ratio - 2) + \"px Copperplate\"\n        module.style.color = \"dimgrey\"\n        module.style.textAlign = \"center\"\n        \n        const button = document.createElement(\"li\");\n        button.classList.add(\"movesButton\");\n        button.innerHTML = \"OK\"\n        button.style.width = \"50%\"\n        button.style.height = \"calc(18% - 2px)\"\n        button.style.backgroundColor = \"cornflowerblue\";\n        button.style.border = \"1px solid cornflowerblue\";\n        button.style.marginLeft = \"auto\";\n        button.style.marginRight = \"auto\";\n        button.style.marginTop = \"11%\"\n        button.style.color = \"white\"\n\n        const windowResize = window.onresize;\n        window.onresize = () => {\n            windowResize();\n\n            if (this.ratio < 0.67) {\n                this.ratio = 0.67;\n            }\n            module.style.font = (27*this.ratio - 2) + \"px Copperplate\"\n            // ruleBox.style.lineHeight = \"100%\"\n        }\n\n        module.appendChild(button);\n        background.appendChild(module);\n        document.getElementsByClassName(\"background\")[0].appendChild(background)\n\n        // this.bindMovesButton();\n        return background;\n    }\n\n    drawWinningScreen() {\n        let img = new Image();\n        img.src = './resources/wood.png';\n        img.onload = () => {\n            this.ctx.drawImage(\n                img,\n                View.SQUARE_DIM * Math.floor((Board.GRID_WIDTH-2) / 2),\n                View.SQUARE_DIM * (Math.floor((Board.GRID_HEIGHT-2) / 2)+0.25),\n                View.SQUARE_DIM * 3, View.SQUARE_DIM * 1.5);\n            this.ctx.beginPath();\n            this.ctx.stroke();\n\n            this.ctx.font = \"30px Copperplate\";\n            this.ctx.lineWidth = 3;\n            let str = \"\";\n            if (this.game.currentPlayer.team === Board.PLAYER_TEAM) {\n                this.ctx.fillStyle = \"blue\";\n                this.ctx.strokeStyle = \"darkblue\";\n                str += \"Blue\";\n            } else {\n                this.ctx.fillStyle = \"red\";\n                this.ctx.strokeStyle = \"maroon\";\n                str += \"Red\";\n            }\n            str += \" Victory!\"\n            this.ctx.strokeText(str,\n                View.SQUARE_DIM * (Board.GRID_WIDTH / 2 - 1),\n                View.SQUARE_DIM * (Board.GRID_HEIGHT / 2 - 0.25));\n            this.ctx.fillText(str,\n                View.SQUARE_DIM * (Board.GRID_WIDTH / 2 - 1),\n                View.SQUARE_DIM * (Board.GRID_HEIGHT / 2 - 0.25));\n            \n            this.drawPlayAgainButton();\n        };\n    }\n\n    drawPlayAgainButton() {\n        this.ctx.lineWidth = 2;\n        this.ctx.fillStyle = 'cornflowerblue';  \n        this.ctx.strokeStyle = '#543000';      \n        this.ctx.fillRect(\n            View.SQUARE_DIM * (Board.GRID_WIDTH / 2 - 0.75),\n            View.SQUARE_DIM * (Math.floor((Board.GRID_HEIGHT) / 2)),\n            View.SQUARE_DIM * 1.5,\n            View.SQUARE_DIM * 0.5);\n        this.ctx.strokeRect(\n            View.SQUARE_DIM * (Board.GRID_WIDTH / 2 - 0.75),\n            View.SQUARE_DIM * (Math.floor((Board.GRID_HEIGHT) / 2)),\n            View.SQUARE_DIM * 1.5,\n            View.SQUARE_DIM * 0.5);\n        this.ctx.strokeStyle = 'blue';\n        this.ctx.font = \"24px Copperplate\";\n        this.ctx.lineWidth = 1;\n        this.ctx.fillStyle = \"white\";\n        this.ctx.strokeStyle = \"grey\"\n        this.ctx.strokeText(\"Play Again?\",\n            View.SQUARE_DIM * (Board.GRID_WIDTH / 2 - 0.70),\n            View.SQUARE_DIM * (Board.GRID_HEIGHT / 2 + 0.3));\n        this.ctx.fillText(\"Play Again?\",\n            View.SQUARE_DIM * (Board.GRID_WIDTH / 2 - 0.70),\n            View.SQUARE_DIM * (Board.GRID_HEIGHT / 2 + 0.3));\n    }\n\n    drawUpgradeConfirmation(pos) {\n        this.ctx.fillStyle = 'lightskyblue';        \n        this.ctx.fillRect(\n            View.SQUARE_DIM * pos.x,\n            View.SQUARE_DIM * pos.y,\n            View.SQUARE_DIM * 1,\n            View.SQUARE_DIM * 0.35);\n        this.ctx.strokeStyle = 'cornflowerblue';\n        this.ctx.strokeRect(\n            View.SQUARE_DIM * pos.x,\n            View.SQUARE_DIM * pos.y,\n            View.SQUARE_DIM * 1,\n            View.SQUARE_DIM * 0.35);\n        this.ctx.lineWidth = 1;\n        this.ctx.font = \"20px Copperplate\";\n        this.ctx.fillStyle = \"dimgrey\";\n        this.ctx.fillText(\"Upgrade?\",\n            View.SQUARE_DIM * pos.x,\n            View.SQUARE_DIM * (pos.y + 0.25));\n    }\n\n    drawBarrackSelection(pos) {\n        let newPos = this.adjustMenuPosition(pos);\n        this.team === Board.ENEMY_TEAM ? this.ctx.fillStyle = \"red\" : this.ctx.fillStyle = \"blue\";\n        let troopSelection = [];\n            this.images.barrack.onload(newPos);\n\n        this.ctx.font = \"30px Copperplate\";\n        this.ctx.fillStyle = \"white\";\n        this.ctx.lineWidth = 3;\n        this.ctx.fillText(\"Buy New Troop?\",\n            View.SQUARE_DIM * (newPos.x + 0.35),\n            View.SQUARE_DIM * (newPos.y + 0.35));\n    \n        let inf = new Infantry(this.game.currentPlayer.team, {y: newPos.y+0.5, x: newPos.x});\n        let arch = new Archer(this.game.currentPlayer.team, {y: newPos.y+0.5, x: newPos.x+1});\n        let def = new Defender(this.game.currentPlayer.team, {y: newPos.y+0.5, x: newPos.x+2});\n        inf.board = this.game.board;\n        arch.board = this.game.board;\n        def.board = this.game.board;\n        inf.view = this.game.view;\n        arch.view = this.game.view;\n        def.view = this.game.view;\n        troopSelection.push(inf);\n        troopSelection.push(arch);\n        troopSelection.push(def);\n        troopSelection.forEach( (unit) => {\n            unit.draw(this.ctx, this.game.currentPlayer);\n        });\n        return troopSelection;\n    }\n\n    adjustMenuPosition(pos) {\n        let newPos = {};\n        pos.x === 0 ? newPos.x = pos.x + 0.25 : newPos.x = pos.x - 2.25;\n        pos.y === 0 ? newPos.y = pos.y + 0.5 : newPos.y = pos.y - 1;\n        return newPos;\n    }\n\n    drawOutline(pos) {\n        this.ctx.strokeStyle = 'yellow';\n        this.ctx.lineWidth = 10;\n        this.ctx.strokeRect(\n            View.SQUARE_DIM * pos.x,\n            View.SQUARE_DIM * pos.y,\n            View.SQUARE_DIM,\n            View.SQUARE_DIM\n        )\n    }\n\n    drawMoveHighlights(pos) {\n        this.drawGridSquare(pos.x, pos.y, 'seagreen', \"mediumseagreen\");\n    }\n\n    drawAttackHighlights(pos) {\n        this.drawGridSquare(pos.x, pos.y, \"cornflowerblue\", \"lightskyblue\")\n    }\n\n    drawGridElems(pos, unitPos, clickedPos) {\n        let gridSquare = this.game.board.grid.get(pos);\n        for (let i=0; i < gridSquare.length; i++) {\n            gridSquare[i].draw(this.ctx, this.game.currentPlayer, unitPos, clickedPos);\n        }\n        this.ctx.beginPath();\n    }\n\n    drawGridSquare(x, y, outlineColor, fillColor) {\n        if (fillColor) {\n            this.ctx.fillStyle = fillColor;\n            this.ctx.globalAlpha = 0.60;\n            this.ctx.fillRect(\n                View.SQUARE_DIM * x,\n                View.SQUARE_DIM * y,\n                View.SQUARE_DIM,\n                View.SQUARE_DIM\n            )\n        }\n        this.ctx.strokeStyle = outlineColor;\n        this.ctx.lineWidth = 2;\n        this.ctx.strokeRect(\n            View.SQUARE_DIM * x,\n            View.SQUARE_DIM * y,\n            View.SQUARE_DIM,\n            View.SQUARE_DIM\n        )\n        this.ctx.globalAlpha = 1;\n    }\n\n    renderImg() {\n        let pixelWidth = Board.GRID_WIDTH * View.SQUARE_DIM;\n        let pixelHeight = (Board.GRID_HEIGHT+1) * View.SQUARE_DIM;\n        this.ctx.canvas.width = pixelWidth;\n        this.ctx.canvas.height = pixelHeight;\n        this.ratio = Math.min(\n            window.innerHeight / this.ctx.canvas.height,\n            window.innerWidth / this.ctx.canvas.width\n        )\n        // this.ctx.scale(this.ratio, this.ratio);\n        let images = {};\n        images.background = new Image();\n        images.background.src = \"./resources/grass2.png\";\n        images.background.onload = (unitPos, clickedPos) => {\n            this.ctx.drawImage(\n                images.background, 0, 0,\n               pixelWidth, pixelHeight,\n               0, 0,\n               pixelWidth, pixelHeight);\n            this.ctx.beginPath();\n            this.ctx.stroke();\n            this.drawBoardWithoutOnload(unitPos, clickedPos);\n        }\n\n        images.barrack = new Image();\n        images.barrack.src = \"./resources/wood.png\";\n        images.barrack.onload = (pos) => {\n            this.ctx.drawImage(\n                images.barrack,\n                View.SQUARE_DIM * pos.x,\n                View.SQUARE_DIM * pos.y,\n                View.SQUARE_DIM * 3, View.SQUARE_DIM * 1.5);\n            this.ctx.beginPath();\n            this.ctx.stroke();\n        };\n\n        return images;\n    }\n\n    // background.classList.add(\".movesBackground\")\n    // module.classList.add(\".noMoreMoves\");\n    // button.classList.add(\".movesButton\");\n\n    bindEvents(ctx) {\n        const button = document.querySelector(\".button\");\n        button.addEventListener(\"click\", this.handleButton.bind(this));\n        const about = document.querySelector(\".about\");\n        if (about) {about.addEventListener(\"click\", this.handleAbout.bind(this));}\n        const rules = document.querySelector(\".rules\");\n        if (rules) {rules.addEventListener(\"click\", this.handleRules.bind(this));}\n        ctx.canvas.addEventListener('click', this.handleClick.bind(this));\n        document.addEventListener(\"click\", this.handleBackground.bind(this));\n        this.bindMovesButton();\n    }\n\n    bindMovesButton() {\n        const movesBackground = document.querySelector(\".movesBackground\");\n        if (movesBackground) {\n            movesBackground.addEventListener(\"click\", this.handleMovesBackground.bind(this, movesBackground))\n        };\n        const movesButton = document.querySelector(\".movesButton\");\n        if (movesButton) {\n            movesButton.addEventListener(\"click\", this.handleMovesButton.bind(this, movesBackground))\n        };\n        return movesButton;\n    }\n\n    handleAbout(event) {\n        const e = document.querySelector(\".abouttitle\");\n        this.invisifyButtons();\n        e.style.visibility = 'visible';\n    }\n\n    handleRules(event) {\n        const e = document.querySelector(\".rulestitle\");\n        this.invisifyButtons();\n        e.style.visibility = 'visible';\n    }\n\n    handleButton(event) {\n        const e1 = document.querySelector(\".about\")\n        const e2 = document.querySelector(\".rules\")\n\n        this.invisifyButtons();\n        e1.style.visibility = 'visible';\n        e2.style.visibility = 'visible';\n    }\n\n    handleClick(event) {\n        let x = Math.floor(event.offsetX / (View.SQUARE_DIM * this.ratio))\n        let y = Math.floor(event.offsetY / (View.SQUARE_DIM * this.ratio))\n        let xExact = event.offsetX / (View.SQUARE_DIM * this.ratio);\n        let yExact = event.offsetY / (View.SQUARE_DIM * this.ratio);\n        let pos = {y, x};\n        let posExact = {y: yExact, x: xExact};\n\n        if (this.game.board.isWon()) {\n        //    this.drawWinningScreen();\n            if (willPlayAgain(posExact)) {\n                this.game.resetGame(this);\n                this.drawBoard();\n            }\n        } else {\n            this.drawBoard();\n            if (isOnBoard(pos)) {\n                this.game.ctx.clickedPos = pos\n                this.game.ctx.exactPos = posExact;\n                this.game.stateMachine();\n            } else if (isButton(posExact)) {\n                this.game.switchPlayers();\n                this.drawBoard();\n            }\n        }\n    }\n\n    handleBackground(event) {\n        if (!document.querySelector(\".background\").contains(event.target)) {\n            this.drawBoard();\n            this.game.state = \"unselected\";\n            const movesBackground = document.querySelector(\".movesBackground\");\n            if (movesBackground) movesBackground.style.visibility = \"hidden\";\n        }\n    }\n\n    handleMovesButton(movesBackground, event) {\n        this.game.switchPlayers();\n        movesBackground.style.visibility = \"hidden\";\n        this.drawBoard();\n    }\n\n    handleMovesBackground(movesBackground, event) {\n        if (!document.querySelector(\".noMoreMoves\").contains(event.target)) {\n            movesBackground.style.visibility = \"hidden\";\n        }\n    }\n}\n\nfunction drawUpgradeButton(unit, ctx, x, y) {\n    unit.team === Board.ENEMY_TEAM ? ctx.fillStyle = \"red\" : ctx.fillStyle = \"blue\";\n    ctx.beginPath();\n    ctx.arc(\n        View.SQUARE_DIM * x + View.SQUARE_DIM * .15,\n        View.SQUARE_DIM * y + View.SQUARE_DIM * .15,\n        View.SQUARE_DIM * .1,\n        0, 2.0 * Math.PI);\n    ctx.fill();\n\n    ctx.fillStyle = \"white\";\n    ctx.font = \"30px Copperplate\";\n    ctx.fillText(\"+\", View.SQUARE_DIM * x + View.SQUARE_DIM * 0.06,\n    View.SQUARE_DIM * y + View.SQUARE_DIM * .22);\n}\n\nfunction drawStats(unit, ctx, x, y) {\n    unit.team === Board.ENEMY_TEAM ? ctx.fillStyle = \"red\" : ctx.fillStyle = \"blue\";\n    ctx.font = \"35px Copperplate\";\n    ctx.strokeStyle = 'dimgrey';\n    ctx.lineWidth = 3;\n    ctx.strokeText(\n        \"A\"+unit.attack.toString(),\n        View.SQUARE_DIM * x + View.SQUARE_DIM * .3,\n        View.SQUARE_DIM * y + View.SQUARE_DIM * .50);\n    ctx.strokeText(\n        \"D\"+unit.defense.toString(),\n        View.SQUARE_DIM * x + View.SQUARE_DIM * .3,\n        View.SQUARE_DIM * y + View.SQUARE_DIM * .75);\n    ctx.fillText(\n        \"A\"+unit.attack.toString(),\n        View.SQUARE_DIM * x + View.SQUARE_DIM * .3,\n        View.SQUARE_DIM * y + View.SQUARE_DIM * .50);\n    ctx.fillText(\n        \"D\"+unit.defense.toString(),\n        View.SQUARE_DIM * x + View.SQUARE_DIM * .3,\n        View.SQUARE_DIM * y + View.SQUARE_DIM * .75);\n}\n\nBarrack.prototype.draw = function(ctx) {\n    this.team === Board.ENEMY_TEAM ? ctx.fillStyle = \"red\" : ctx.fillStyle = \"blue\";\n    ctx.fillRect(\n        View.SQUARE_DIM * this.pos.x + View.SQUARE_DIM * .10,\n        View.SQUARE_DIM * this.pos.y + View.SQUARE_DIM * .70,\n        View.SQUARE_DIM * .80,\n        View.SQUARE_DIM * .20);\n\n    this.image.onload = () => {\n        ctx.drawImage(\n            this.image,\n            View.SQUARE_DIM * this.pos.x,\n            View.SQUARE_DIM * this.pos.y,\n            View.SQUARE_DIM, View.SQUARE_DIM);\n        ctx.beginPath();\n        ctx.stroke();\n    };\n    this.image.onload();\n}\n\nBase.prototype.draw = function(ctx) {\n    this.team === Board.ENEMY_TEAM ? ctx.fillStyle = \"red\" : ctx.fillStyle = \"blue\";\n    ctx.beginPath();\n    ctx.arc(\n        View.SQUARE_DIM * this.pos.x + View.SQUARE_DIM * .50,\n        View.SQUARE_DIM * this.pos.y + View.SQUARE_DIM * .50,\n        View.SQUARE_DIM * .35,\n        0, 2.0 * Math.PI);\n    ctx.fill();\n}\n\nTreasure.prototype.draw = function(ctx) {\n    this.image.onload = () => {\n        ctx.drawImage(\n            this.image,\n            View.SQUARE_DIM * this.pos.x,\n            View.SQUARE_DIM * this.pos.y,\n            View.SQUARE_DIM, View.SQUARE_DIM);\n        ctx.beginPath();\n        ctx.stroke();\n    };\n    this.image.onload();\n}\n\nexport function drawUpgradeConfirmation(ctx, pos) {\n    ctx.fillStyle = 'lightskyblue';        \n    ctx.fillRect(\n        View.SQUARE_DIM * pos.x,\n        View.SQUARE_DIM * pos.y,\n        View.SQUARE_DIM * 1,\n        View.SQUARE_DIM * 0.35);\n    ctx.strokeStyle = 'cornflowerblue';\n    ctx.strokeRect(\n        View.SQUARE_DIM * pos.x,\n        View.SQUARE_DIM * pos.y,\n        View.SQUARE_DIM * 1,\n        View.SQUARE_DIM * 0.35);\n    ctx.lineWidth = 1;\n    ctx.font = \"20px Copperplate\";\n    ctx.fillStyle = \"dimgrey\";\n    ctx.fillText(\"Upgrade?\",\n        View.SQUARE_DIM * pos.x,\n        View.SQUARE_DIM * (pos.y + 0.25));\n}\n\nUnit.prototype.draw = function(ctx, currentPlayer, unitPos, clickedPos) {\n    this.team === Board.ENEMY_TEAM ? ctx.fillStyle = \"red\" : ctx.fillStyle = \"blue\";\n\n    this.image.onload = () => {\n        ctx.drawImage(\n            this.image,\n            View.SQUARE_DIM * this.pos.x,\n            View.SQUARE_DIM * this.pos.y,\n            View.SQUARE_DIM, View.SQUARE_DIM);\n        ctx.beginPath();\n        ctx.stroke();\n        drawStats(this, ctx, this.pos.x, this.pos.y);\n        if (this.isUpgradable(currentPlayer)) {\n            drawUpgradeButton(this, ctx, this.pos.x, this.pos.y);\n            if (unitPos && clickedPos) {\n                drawUpgradeConfirmation(ctx, unitPos);\n            }\n        }\n    };\n    this.image.onload();\n    // this.image.src = this.image.src;\n}\n\nexport default View;","class Player {\n    constructor(team, treasure, base) {\n        this.team = team;\n        this.units = [];\n        this.treasure = treasure;\n        this.base;\n    }\n\n    removeUnit(unit) {\n        let found = false;\n        let i = 0;\n        while (!found && i < this.units.length) {\n            if (this.units[i++].pos.equals(unit.pos)) {\n                found = true;\n            }\n        }\n        let u = this.units.splice(i-1, 1);\n        // console.log(this.units, u )\n        return this.units;\n    }\n}\n\nexport default Player;","import Player from \"./player\";\n\nclass HumanPlayer extends Player {\n    constructor(team) {\n        super(team);\n    }\n}\n\nexport default HumanPlayer;","import View from './view.js';\nimport Game from './game.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const canvas = document.getElementById('treasure-game');\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    const ctx = canvas.getContext(\"2d\");\n    const el = document.querySelector('.buttons');\n\n    const game = new Game();\n    const view = new View(game, ctx, el);\n    game.view = view;\n\n    view.bindEvents(ctx);\n});","import Board from \"./board\";\nimport HumanPlayer from \"./humanPlayer\";\nimport { isUpgradeButton, isUpgradeConfirmation } from \"./utils\";\n\nconst MAX_AP = 5;\nconst MAX_UNITS = 8;\n\nclass Game {\n    constructor() {\n        this.board = new Board();\n        this.view = null;\n        this.state = 'unselected';\n        this.player = new HumanPlayer(Board.PLAYER_TEAM);\n        this.enemy = new HumanPlayer(Board.ENEMY_TEAM);\n        this.currentPlayer = this.player;\n        this.actionPoints = MAX_AP;\n        this.ctx = {}; //{ clickedPos, selectedSquare }\n    }\n\n    resetGame(view) {\n        this.board = new Board();\n        this.view = view;\n        this.state = 'unselected';\n        this.player = new HumanPlayer(Board.PLAYER_TEAM);\n        this.enemy = new HumanPlayer(Board.ENEMY_TEAM);\n        this.currentPlayer = this.player;\n        this.actionPoints = MAX_AP;\n        this.ctx = {};\n    }\n\n    switchPlayers() {\n        this.board.grid.forEach((col) => {\n            col.forEach((row) => {\n                row.forEach((e) => {\n                    if (e.parentType() === 'Unit') {\n                        e.hasMoved = false;\n                        e.hasAttacked = false;\n                        e.hasUpgraded = false;\n                    }\n                })\n            })\n        })\n        this.actionPoints = MAX_AP;\n        this.state = 'unselected';\n        this.currentPlayer === this.player ? this.currentPlayer = this.enemy : this.currentPlayer = this.player;\n    }\n\n    //ctx -> {clickedPos always set, selectedSquare that will be set in unselected stage}\n    stateMachine() {\n        let square = this.board.grid.get(this.ctx.clickedPos);\n        \n        switch (this.state) {\n            case 'unselected':\n                //if unit upgrade is selected\n                if (this.unitUpgradeable(this.ctx.exactPos, square.last())) {\n                    this.ctx.selectedSquare = square;\n                    this.state = 'upgrade';\n                } //if unit is selected\n                else if (this.unitSelected(square.last())) {\n                    this.ctx.selectedSquare = square;\n                    this.state = 'unit';\n                } //else if barrack is selected\n                else if (this.actionPoints > 1 && this.currentPlayer.units.length < MAX_UNITS\n                    && this.barrackSelected(square.first())) {\n                    this.ctx.menu = this.view.drawBarrackSelection(square.first().pos);\n                    this.ctx.selectedSquare = square;\n                    this.state = 'barrack';\n                }\n                break;\n            case 'unit':\n                //if action taken\n                if (this.actionTaken(this.ctx.clickedPos, this.ctx.selectedSquare)) {\n                    this.ctx = {};\n                    this.state = 'unselected';\n                    // this.view.drawBoard();\n                    if (this.board.isWon()) {\n                        this.view.drawBoard();\n                        this.view.drawWinningScreen();\n                    } else {\n                        if (this.actionPoints === 0) { this.switchPlayers(); }\n                        this.view.drawBoard();\n                    }\n                } //else if action not taken\n                else {\n                    this.view.drawBoard();\n                    if (this.unitUpgradeable(this.ctx.exactPos, square.last())) {\n                        this.state = 'upgrade'\n                    } else if (this.unitSelected(square.last())) {\n                        this.state = 'unit';\n                    } else if (this.actionPoints > 1 && this.currentPlayer.units.length < MAX_UNITS\n                        && this.barrackSelected(square.first())) {\n                        this.ctx.menu = this.view.drawBarrackSelection(square.first().pos);\n                        this.state = 'barrack';\n                    } else {\n                        this.state = 'unselected';\n                    }\n                    this.ctx.selectedSquare = square;\n                }\n                this.noMoreMovesDisplay();\n                break;\n            case 'barrack':\n                //if unit is bought\n                if (this.unitBought(this.ctx.exactPos, this.ctx.menu, this.ctx.selectedSquare)) {\n                    this.ctx = {};\n                    this.state = 'unselected';\n                    if (this.actionPoints === 0) { this.switchPlayers(); }\n                    this.view.drawBoard();\n                } //else if unit is not bought\n                else {\n                    this.view.drawBoard();\n                    if (this.unitUpgradeable(this.ctx.exactPos, square.last())) {\n                        this.state = 'upgrade';\n                    } else if (this.unitSelected(square.last())) {\n                        this.state = 'unit';\n                    } else if (this.actionPoints > 1 && this.currentPlayer.units.length < MAX_UNITS\n                        && this.barrackSelected(square.first())) {\n                        this.ctx.menu = this.view.drawBarrackSelection(square.first().pos);\n                        this.state = 'barrack';\n                    } else {\n                        this.state = 'unselected';\n                    }\n                    this.ctx.selectedSquare = square;\n                }\n                this.noMoreMovesDisplay();\n                break;\n            case 'upgrade':\n                //if unit is upgraded\n                if (this.unitUpgraded(this.ctx.exactPos, this.ctx.selectedSquare)) {\n                    this.state = 'unselected';\n                    if (this.actionPoints === 0) { this.switchPlayers(); }\n                    this.view.drawBoard();\n                }\n                else {\n                    this.redirectState(square);\n                    // this.view.drawBoard();\n                    // if (this.unitUpgradeable(this.ctx.exactPos, square.last())) {\n                    //     this.state = 'upgrade';\n                    // } else if (this.unitSelected(square.last())) {\n                    //     this.state = 'unit';\n                    // } else if (this.actionPoints > 1 && this.currentPlayer.units.length < MAX_UNITS\n                    //     && this.barrackSelected(square.first())) {\n                    //     this.ctx.menu = this.view.drawBarrackSelection(square.first().pos);\n                    //     this.state = 'barrack';\n                    // } else {\n                    //     this.state = 'unselected';\n                    // }\n                    // this.ctx.selectedSquare = square;\n                }\n                this.noMoreMovesDisplay();\n                break;\n            default:\n                // console.log(\"ERROR: undefined state\");\n        }\n    }\n\n    redirectState() {\n        this.view.drawBoard();\n        if (this.unitUpgradeable(this.ctx.exactPos, square.last())) {\n            this.state = 'upgrade';\n        } else if (this.unitSelected(square.last())) {\n            this.state = 'unit';\n        } else if (this.actionPoints > 1 && this.currentPlayer.units.length < MAX_UNITS\n            && this.barrackSelected(square.first())) {\n            this.ctx.menu = this.view.drawBarrackSelection(square.first().pos);\n            this.state = 'barrack';\n        } else {\n            this.state = 'unselected';\n        }\n        this.ctx.selectedSquare = square;\n    }\n\n    noMoreMovesDisplay() {\n        if (!this.movesAvailable() && this.actionPoints < MAX_AP) {\n            const noMoreMoves = this.view.noMoreMoves.querySelector(\".noMoreMoves\");\n            const button = noMoreMoves.querySelector(\".movesButton\")\n        \n            noMoreMoves.innerHTML = this.view.updateNoMoreMovesStr();\n            noMoreMoves.appendChild(button);\n            \n            this.view.noMoreMoves.style.visibility = \"visible\"\n        }\n    }\n\n    movesAvailable() {\n        let bool = false;\n        this.currentPlayer.units.forEach(unit => {\n            bool ||= !unit.hasMoved;\n            if (!unit.hasAttacked) {\n                unit.getAttacks();\n            }\n            bool ||= !unit.hasUpgraded && unit.attacks.length > 0;\n            bool ||= this.actionPoints > 1 && unit.isUpgradable(this.currentPlayer);\n            bool ||= this.actionPoints > 1 && this.barracksEmpty();\n        })\n        return bool;\n    }\n\n    barracksEmpty() {\n        let barracks;\n        if (this.currentPlayer === this.player) {\n            barracks = this.board.barracks.player;\n        } else {\n            barracks = this.board.barracks.enemy;\n        }\n\n        let res = false;\n        barracks.forEach(b => {\n            let bool = true;\n            const barrackSquare = this.board.grid.get(b.pos)\n            barrackSquare.forEach(unit => {\n                if (unit.parentType() === 'Unit') bool = false;\n            })\n            res ||= bool;\n        })\n        return res;\n    }\n\n    unitUpgradeable(pos, unit) {\n        let unitUpgradeable = false;\n        if (this.actionPoints > 1 && unit && unit.parentType() === 'Unit' &&\n            unit.isUpgradable(this.currentPlayer) && isUpgradeButton(unit.pos, pos)) {\n                unitUpgradeable = true;\n                this.view.drawBoard(unit.pos, pos);\n        }\n        return unitUpgradeable;\n    }\n\n    unitUpgraded(pos, square) {\n        let unitUpgraded = false;\n        let unit = square.last();\n        if (unit && unit.parentType() === 'Unit' &&\n            unit.isUpgradable(this.currentPlayer) && isUpgradeConfirmation(unit.pos, pos)) {\n                unit.upgrades();\n                this.actionPoints -= 2;\n                unitUpgraded = true;\n        }\n        return unitUpgraded;\n    }\n\n    unitSelected(unit) {\n        let unitSelected = false;\n        if (unit && unit.parentType() === 'Unit' && unit.team === this.currentPlayer.team) {\n            unit.resetActions(); //reset newly selected unit's action squares\n            if (!unit.board) { unit.board = this.board; }\n            if (!unit.view) { unit.view = this.view; }\n\n            this.unitCallDrawSelected(unit, this.view);\n            unitSelected = true;\n        }\n        return unitSelected;\n    }\n\n    unitCallDrawSelected(unit, view) {\n        if (!unit.hasMoved) {\n            unit.getMoves().forEach((pos) => {\n                view.drawMoveHighlights(pos);\n                view.drawGridElems(pos);\n            });\n        }\n\n        if (!unit.hasAttacked && !unit.hasUpgraded) {\n            unit.getAttacks().forEach((pos) => {\n                view.drawAttackHighlights(pos);\n                view.drawGridElems(pos);\n            })\n        }\n        view.drawOutline(unit.pos);\n    }\n\n    barrackSelected(barrack) {\n        return barrack && barrack.type() === 'Barrack' && barrack.team === this.currentPlayer.team;\n    }\n\n    unitBought(pos, menu, square) {\n        let unitBought = false;\n        let newPos = this.adjustMenuPosition(square.first(), pos);\n        let unit;\n        if (unit = menu.find(e => e.pos.x === newPos.x && e.pos.y === newPos.y)) {\n            unit.pos = square.first().pos;\n            square.push(unit);\n            this.currentPlayer.units.push(unit);\n            this.actionPoints -= 2;\n            unitBought = true;\n        }\n\n        return unitBought;\n    }\n\n    adjustMenuPosition(barrack, pos) {\n        let xDifference = barrack.pos.x === 0 ? -0.25 : 0.25;\n        let yDifference = barrack.pos.y === 0 ? -1 : 0.5;\n        let x = Math.floor((pos.x + xDifference));\n        let y = Math.floor((pos.y + yDifference));\n        let newPos = {};\n        newPos.x = barrack.pos.x === 0 ? x + 0.25 : x - 0.25;\n        newPos.y = barrack.pos.y === 0 ? y + 1 : y - 0.5;\n        return newPos;\n    }\n\n    actionTaken(pos, square) {\n        return this.moveUnit(pos, square) || this.attackUnit(pos, square);\n    }\n\n    moveUnit(pos, square) {\n        let unitMoved = false;\n        let unit = square.last();\n\n        if (unit.moves && unit.moves.find(e => e.x === pos.x && e.y === pos.y)) {\n            unit.pos = pos; //reset unit position;\n            if (unit.onHomeTerf()) {\n                unit.downgrade();\n            }\n            square.pop();\n            let treasureIdx = this.getTreasureIdx(square);\n            if (treasureIdx !== null) {\n                square[treasureIdx].pos = pos;\n                this.board.grid.get(pos).push(square[treasureIdx]);\n                square.splice(treasureIdx, 1);\n            }\n            this.board.grid.get(pos).push(unit);\n\n            this.actionPoints--;\n            unit.hasMoved = true;\n            unitMoved = true;\n        }\n        return unitMoved;\n    }\n\n    getTreasureIdx(square) {\n        for (let i=0; i<square.length; i++) {\n            if (square[i].team !== this.currentPlayer.team\n                && square[i].type() === 'Treasure') {\n                return i;\n            }\n        }\n        return null\n    }\n\n    attackUnit(pos, square) {\n        let unitAttacked = false;\n        let unit = square.last();\n        if (unit.attacks && unit.attacks.find(e => e.x === pos.x && e.y === pos.y)) {\n            let attackedSquare = this.board.grid.get(pos);\n            let attackedUnit = attackedSquare.last();\n            attackedUnit.defense -= unit.attack;\n            if (attackedUnit.defense < 1) {\n                attackedSquare.pop();\n                this.currentPlayer.team === this.player.team ? this.enemy.removeUnit(attackedUnit) : this.player.removeUnit(attackedUnit);\n            }\n            this.actionPoints--;\n            unit.hasAttacked = true;\n            unitAttacked = true;\n        }\n        return unitAttacked;\n    }\n}\n\nexport default Game;"],"names":["constructor","team","pos","this","image","Image","parentType","Object","getPrototypeOf","name","type","Piece","super","src","Board","pos1","y","GRID_HEIGHT","x","Math","floor","GRID_WIDTH","pos2","treasure","player","Treasure","PLAYER_TEAM","enemy","ENEMY_TEAM","base","Base","barracks","grid","makeGrid","static","i","push","j","barrack","Barrack","get","isWon","equals","isOnBoard","Array","prototype","containsType","square","some","last","length","first","attack","defense","pointStandard","upgrade","level","attackDist","moves","attacks","hasMoved","hasAttacked","hasUpgraded","board","view","resetActions","upgrades","downgrade","min","getMoves","getMovesSet","delete","JSON","stringify","map","elem","parse","validVisited","Set","maxDist","newPos","hasUnit","has","add","getAttacks","isUpgradable","currentPlayer","onHomeTerf","Unit","View","game","ctx","el","ratio","images","renderImg","drawBoard","drawMenu","noMoreMoves","drawNoMoreMovesModule","resetView","clearBoard","clearRect","canvas","width","height","unitPos","clickedPos","invisifyButtons","background","onload","e","document","querySelector","forEach","style","visibility","drawBoardWithoutOnload","drawGridSquare","drawGridElems","drawMidline","drawEndTurnButton","font","fillStyle","str","actionPoints","toString","strokeStyle","lineWidth","strokeText","SQUARE_DIM","fillText","units","beginPath","moveTo","lineTo","stroke","fillRect","strokeRect","createElement","classList","position","right","bottom","cell","backgroundColor","border","left","listStyle","cursor","innerHTML","color","textAlign","lineHeight","appendChild","getElementsByClassName","drawMenuOptions","ruleBox","drawRules","aboutBox","drawAbout","windowResize","window","onresize","menu","rules","drawButton","about","innerHeight","innerWidth","title","drawMenuDisplayBox","drawMenuInnerDisplayBox","box","top","transform","margin","updateNoMoreMovesStr","module","paddingLeft","paddingRight","button","marginLeft","marginRight","marginTop","drawWinningScreen","img","drawImage","drawPlayAgainButton","drawUpgradeConfirmation","drawBarrackSelection","adjustMenuPosition","troopSelection","inf","Infantry","arch","Archer","def","Defender","unit","draw","drawOutline","drawMoveHighlights","drawAttackHighlights","gridSquare","outlineColor","fillColor","globalAlpha","pixelWidth","pixelHeight","bindEvents","addEventListener","handleButton","bind","handleAbout","handleRules","handleClick","handleBackground","bindMovesButton","movesBackground","handleMovesBackground","movesButton","handleMovesButton","event","e1","e2","offsetX","offsetY","xExact","posExact","willPlayAgain","resetGame","exactPos","stateMachine","isButton","switchPlayers","contains","target","state","arc","PI","fill","drawStats","drawUpgradeButton","removeUnit","found","splice","Player","getElementById","getContext","HumanPlayer","col","row","unitUpgradeable","selectedSquare","unitSelected","barrackSelected","actionTaken","noMoreMovesDisplay","unitBought","unitUpgraded","redirectState","movesAvailable","bool","barracksEmpty","res","b","squarePos","clickPos","isUpgradeButton","isUpgradeConfirmation","unitCallDrawSelected","find","xDifference","yDifference","moveUnit","attackUnit","unitMoved","pop","treasureIdx","getTreasureIdx","unitAttacked","attackedSquare","attackedUnit"],"sourceRoot":""}